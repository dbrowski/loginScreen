(this.webpackJsonpdnd=this.webpackJsonpdnd||[]).push([[0],{179:function(e,t,a){e.exports=a(331)},188:function(e,t,a){},189:function(e,t,a){e.exports=a.p+"static/media/logo.b15fcf97.png"},331:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),i=a(84),o=(a(188),a(34)),l={branding:{logo:a(189)}},c={AUTH:"https://auth.pingone.com",API:"https://api.pingone.com/v1/environments"};"stg"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE&&(c={AUTH:"https://auth-staging.pingone.com",API:"https://api-staging.pingone.com/v1/environments"});var d=Object(o.a)(Object(o.a)({},l),c),u=a(4),m=a.n(u),h=a(14),p=a(18),f=a(19),g=a(85),w=a.n(g),E="maxRepeatedCharacters",v="minUniqueCharacters",b="length",S="minCharacters",y="abcdefghijklmnopqrstuvwxyz",P="ABCDEFGHIJKLMNOPQRSTUVWXYZ",N="0123456789",R="~!@#$%^&*()-_=+[]{}|;:,.<>/?",O="minComplexity",C=function(e,t,a){var n=m.a.sumBy(e,(function(e){return m.a.includes(t,e)?1:0}));return console.log(t),console.log("count >= min"),console.log(n+" >= "+a),n>=a},U=function(e,t,a){switch(t){case E:var n=m.a.get(e,t);if(a.length<n)return!1;for(var r=0;r<a.length;r+=1)for(var s=a[r],i=1,o=r+1;o<a.length&&a[o]===s;o+=1)if((i+=1)>n)return!1;return!0;case v:var l=m.a.get(e,t),c=new Set;return m.a.each(a,(function(e){c.add(e)})),c.size>=l;case b:var d=m.a.get(e,t);return a.length>=d.min&&a.length<=d.max;case N:return C(a,N,m.a.get(e,[S,N]));case y:return C(a,y,m.a.get(e,[S,y]));case P:return C(a,P,m.a.get(e,[S,P]));case R:return C(a,R,m.a.get(e,[S,R]));case O:var u=w()(1e11).times(604800);if(0===a.length)return 0;var h=!1,p=!1,f=!1,g=!1,U=!1;m.a.each(a,(function(e){if(e>="a"&&e<="z")h=!0;else if(e>="A"&&e<="Z")p=!0;else if(e>="0"&&e<="9")f=!0;else{if(!(e>=" "&&e<="~"))return U=!0,!1;g=!0}return!0}));var _=0;U?_=256:(h&&(_+=26),p&&(_+=26),f&&(_+=10),g&&(_+=33));for(var A=w()(0),I=1;I<=a.length;I+=1){var k=w()(_).pow(I);A=A.add(k)}return A.compare(u)>-1;default:return!1}},_=function(e,t){var a=m.a.filter(m.a.keys(e),(function(e){return e===E||e===v||e===O||e===b}));console.log(e);var n=m.a.get(e,S);return m.a.each(n,(function(e,t){return a.push("".concat(t))})),console.log(a),m.a.map(a,(function(a){return{name:a,isValid:U(e,a,t)}}))},A=function(e,t){switch(e){case"history":var a=m.a.get(t,"history.count",null);return null===a?"Password must not be similar to your prevous passwords":"Password cannot be the same or similar to your previous ".concat(a," passwords.");case"excludesProfileData":return"Password cannot contain information from your user profile.";case"notSimilarToCurrent":return"Password cannot be similar to your current password.";case"excludesCommonlyUsed":return"Password must not be a commonly used password.";case"minComplexity":return"Password does not meet minimum complexity requirements.";default:return"Password does not meet requirements."}},I=function(e,t){return m.a.map(e,(function(e){var a=e.isValid?r.a.createElement("i",{className:"fa fa-check",style:{color:"green"}}):r.a.createElement("i",{className:"fa fa-warning",style:{color:"red"}});return r.a.createElement("div",{key:e.name,className:"requirement"},a,r.a.createElement("span",{className:"requirement__name"},t.getPasswordPolicyMessage(e)))}))},k=function(e){return D(window.location.href).queryParams[e]},D=function(e){if(!e)return{};var t=document.createElement("a");return t.href=e,{host:t.host,pathname:t.pathname,search:t.search,queryParams:j(t.search),hash:t.hash}},j=function(e){var t=e.replace(/^\?/,"").split("&"),a={};return m.a.forEach(t,(function(e){var t=e.split("=");a[t[0]]=t[1]})),a},T={SUCCESS:"SUCCESS",UNAUTHORIZED:"UNAUTHORIZED",COMPLETED:"COMPLETED",USERNAME_PASSWORD_REQUIRED:"USERNAME_PASSWORD_REQUIRED",PASSWORD_REQUIRED:"PASSWORD_REQUIRED",INVALID_CREDENTIALS:"INVALID_CREDENTIALS",NO_PASSWORD:"NO_PASSWORD",PASSWORD_EXPIRED:"PASSWORD_EXPIRED",PASSWORD_LOCKED_OUT:"PASSWORD_LOCKED_OUT",MUST_CHANGE_PASSWORD:"MUST_CHANGE_PASSWORD",PASSWORD_REQUIREMENTS_NOT_MET:"PASSWORD_REQUIREMENTS_NOT_MET",VERIFICATION_CODE_REQUIRED:"VERIFICATION_CODE_REQUIRED",RECOVERY_CODE_REQUIRED:"RECOVERY_CODE_REQUIRED",INVALID_VALUE:"INVALID_VALUE",UNIQUENESS_VIOLATION:"UNIQUENESS_VIOLATION",UNKNOWN:"UNKNOWN",FAILED:"FAILED"},V=function(){function e(t){var a=t.id,n=t.status,r=t._links,s=t._embedded,i=t.resumeUrl;Object(p.a)(this,e),this.id=a,this.links=r,this.embedded=s,this.status=m.a.get(T,n,T.UNKNOWN),this.resumeUrl=i}return Object(f.a)(e,[{key:"isPasswordExpired",value:function(){return m.a.isEqual(this.status,T.PASSWORD_EXPIRED)}},{key:"isCompleted",value:function(){return m.a.isEqual(this.status,T.COMPLETED)}},{key:"isFailed",value:function(){return m.a.isEqual(this.status,T.FAILED)}},{key:"isRecoveryCodeRequired",value:function(){return m.a.isEqual(this.status,T.RECOVERY_CODE_REQUIRED)}},{key:"getLinks",value:function(){return this.links}},{key:"getPasswordPolicy",value:function(){return this.embedded.passwordPolicy}},{key:"getUser",value:function(){return this.embedded.user}},{key:"getPasswordPolicyMessage",value:function(e){var t,a=this.embedded.passwordPolicy;return a?e.name===R?(t=m.a.get(m.a.get(a,"minCharacters"),R),m.a.get(M(t),"minSpecial")):e.name===y?(t=m.a.get(m.a.get(a,"minCharacters"),y),m.a.get(M(t),"minLower")):e.name===P?(t=m.a.get(m.a.get(a,"minCharacters"),P),m.a.get(M(t),"minUpper")):e.name===N?(t=m.a.get(m.a.get(a,"minCharacters"),N),m.a.get(M(t),"minNumeric")):m.a.get(M(m.a.get(a,e.name)),e.name):{}}}]),e}(),M=function(e){return e?{maxRepeatedCharacters:"No more than ".concat(e," repeated character").concat(e>1?"s":""),minUniqueCharacters:"".concat(e," unique character").concat(e>1?"s":""),length:"".concat(e.min," character").concat(e.min>1?"s":""),minNumeric:"".concat(e," number"),minLower:"".concat(e," lowercase character").concat(e>1?"s":""),minUpper:"".concat(e," UPPERCASE character").concat(e>1?"s":""),minSpecial:"".concat(e," special character").concat(e>1?"s":""),minComplexity:"Must be a strong password"}:{}},x=a(108),q=a.n(x),L=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F(e,"application/vnd.pingidentity.".concat(t),a)},F=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,r){return q.a.post(e).withCredentials().send(a).set("Content-Type",t).end((function(e,t){e?r(t?t.body:e):n(t.body)}))}))},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(r,s){var i=q.a.get(e).set(a);n&&(i=i.withCredentials()),i.end((function(e,a){e?s(a?a.body:e):r(t?a.body:a)}))}))},G=function(e){return e?d.AUTH:d.API},H=function(e,t){var a="".concat(G(!0),"/").concat(e,"/flows/").concat(t);return W(a,!0,{"Content-Type":"application/json"},!0)},Y=function(e){return L(e,"session.reset+json",{})},Q=function(e,t,a){return L(e,"usernamePassword.check+json",{username:t,password:a})},z=function(e,t,a,n){return L(e,"password.reset+json",{currentPassword:a,newPassword:n})},B=function(e,t){return L(e,"password.forgot+json",{username:t})},X=function(e){return L(e,"password.sendRecoveryCode+json")},K=function(e,t,a){return L(e,"password.recover+json",{recoveryCode:t,newPassword:a})},J=function(e,t,a,n){return L(e,"user.register+json",{username:t,email:a,password:n})},Z=function(e){return L(e,"user.sendVerificationCode+json")},$=function(e,t){return L(e,"user.verify+json",{verificationCode:t})},ee={UPDATE_FLOW:"UPDATE_FLOW",UNRECOVERABLE_ERROR:"UNRECOVERABLE_ERROR"},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:ee.UPDATE_FLOW,payload:{result:e,isAuthenticated:t,message:a}}},ae=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e(te(t?new V(t):t,a,n))}},ne=function(e){return function(t,a){return H(t,a).then((function(t){return e(te(new V(t))),Promise.resolve(t)}))}},re=function(e){return function(t){return Y(t).then((function(t){return e(te(new V(t))),Promise.resolve(t)}))}},se=function(e){return function(t,a,n){return Q(t,a,n).then((function(t){return e(te(new V(t),!0)),Promise.resolve(t)}))}},ie=function(e){return function(t,a){return B(t,a).then((function(t){return e(te(new V(t))),Promise.resolve(t)}))}},oe=function(e){return function(t){return X(t).then((function(t){return e(te(new V(t))),Promise.resolve(t)}))}},le=function(e){return function(t,a,n){return K(t,a,n).then((function(t){return e(te(new V(t),!1,"You successfully recovered your password, "+m.a.get(t,"_embedded.user.username",""))),Promise.resolve(t)}))}},ce=function(e){return function(t,a,n,r){return console.log("newP"),console.log(r),z(t,a,n,r).then((function(t){return e(te(new V(t))),Promise.resolve(t)}))}},de=function(e){return function(t){return Z(t).then((function(t){return e(te(new V(t))),Promise.resolve(t)}))}},ue=function(e){return function(t,a){return $(t,a).then((function(t){return e(te(new V(t),!1,"Congratulations, "+m.a.get(t,"_embedded.user.username")+"! You\u2019ve created a Ping Sample Application account")),Promise.resolve(t)}))}},me=function(e){return function(t,a,n,r){return J(t,a,n,r).then((function(t){return e(te(new V(t))),Promise.resolve(t)}))}},he=ee,pe=function(e){return{signOn:se(e),changeUserPassword:ce(e),forgotPassword:ie(e),sendRecoveryCode:oe(e),recoverUserPassword:le(e),sendVerificationCode:de(e),verifyUser:ue(e),registerUser:me(e),getFlow:ne(e),updateFlow:ae(e),resetFlow:re(e)}},fe=a(23),ge=a(22),we=a(8),Ee=a(391),ve=a(381),be=a(385),Se=a(386),ye=a(389),Pe=a(378),Ne=a(376),Re=a(161),Oe=a.n(Re),Ce=a(166),Ue=a(382),_e=a(88),Ae=a(383),Ie=a(164),ke=(a(206),a(160)),De=a.n(ke),je=a(390),Te=a(377);function Ve(e){Object.assign({},e);var t=Object(n.useState)(0),a=Object(_e.a)(t,2),s=a[0],i=a[1],l=Object(n.useState)(120),c=Object(_e.a)(l,2),d=c[0],u=c[1],m=Object(n.useState)(0),h=Object(_e.a)(m,2),p=(h[0],h[1],Object(Ue.a)((function(e){return{root:{height:"100%"},dropzoneArea:{height:"100%",maxHeight:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},dropzoneAreaText:{color:"#000000",fontSize:"2rem"},image:{backgroundImage:s,backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center",width:"100%"}}}))()),f=function(e){var t=Object(o.a)({},s),a=e[e.length-1];a&&(console.log(a),t=URL.createObjectURL(a),i(t))},g=function(e,t){u(t)};return r.a.createElement(Ae.a,{className:p.root,maxWidth:!1,disableGutters:!0},r.a.createElement(Ne.a,{container:!0,display:"flex",wrap:"wrap",spacing:0,justify:"flex-start",alignItems:"stretch",style:{height:"100%",maxHeight:"100%"}},r.a.createElement(Ne.a,{item:!0,xs:12,style:{overflow:"hidden",position:"relative"}},s?r.a.createElement(Ne.a,{item:!0,container:!0,display:"flex",style:{height:"100%"}},r.a.createElement(Ne.a,{item:!0,xs:12,style:{width:"100%",maxWidth:"100%",height:"95%",maxHeight:"95%"}},r.a.createElement(De.a,{classes:p.image,image:s,border:0,color:[255,255,255,.6],scale:d/100,rotate:0,style:{minHeight:"100%",minWidth:"100%",overflow:"hidden"}})),r.a.createElement(Ne.a,{item:!0,xs:12,style:{height:"10%",maxHeight:"10%"}},r.a.createElement(Te.a,{style:{width:"100%"}},r.a.createElement(je.a,{value:d,onChange:g,min:10,max:300,"aria-labelledby":"continuous-slider"})))):r.a.createElement(Ie.a,{dropzoneClass:p.dropzoneArea,dropzoneParagraphClass:"color: #000000, fontSize: 2rem",showPreviews:!1,showPreviewsInDropzone:!1,acceptedFiles:["image/*"],filesLimit:1,maxFileSize:5e7,onChange:f,dropzoneText:"Upload a Logo Image Here. Drag Image to Rearrange."}))))}var Me=a(387);function xe(e){return r.a.createElement(Me.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"email",autoFocus:!0,onChange:e.handleUsernameUpdate})}function qe(e){return r.a.createElement(Me.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.handlePasswordUpdate})}var Le=a(384);function Fe(e){return r.a.createElement(Ne.a,{item:!0,xs:!0},r.a.createElement(Le.a,{href:"#",variant:"body2",onClick:e.handleForgotPassword},"Forgot password?"))}function We(e){return r.a.createElement(Ne.a,{item:!0},r.a.createElement(Le.a,{href:"#",variant:"body2",onClick:e.handleRegister},"Don't have an account? Sign Up"))}function Ge(e){return r.a.createElement(Ce.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Le.a,{color:"inherit",href:"https://developer.pingidentity.com/"},"Ping Identity")," ",(new Date).getFullYear(),".")}var He=Object(Ue.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ye(e){var t=e.handleUsernameUpdate,a=e.handlePasswordUpdate,n=e.handleSubmit,s=e.handleForgotPassword,i=(e.handlePasswordReset,e.handleRegister),o=He();return r.a.createElement(Ne.a,{container:!0,component:"main",className:o.root},r.a.createElement(be.a,null),r.a.createElement(Ne.a,{item:!0,xs:!1,sm:4,md:6,lg:8,xl:9,style:{maxHeight:"100%"}},r.a.createElement(Ve,null)),r.a.createElement(Ne.a,{item:!0,xs:12,sm:8,md:6,lg:4,xl:3,component:Pe.a,elevation:6,square:!0,style:{maxHeight:"100%"}},r.a.createElement("div",{className:o.paper},r.a.createElement(Ee.a,{className:o.avatar},r.a.createElement(Oe.a,null)),r.a.createElement(Ce.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:o.form,noValidate:!0},r.a.createElement(xe,{handleUsernameUpdate:t}),r.a.createElement(qe,{handlePasswordUpdate:a}),r.a.createElement(Se.a,{control:r.a.createElement(ye.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(ve.a,{type:"button","data-id":"user-credentials-submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:n},"Sign In"),r.a.createElement(Ne.a,{container:!0},r.a.createElement(Fe,{handleForgotPassword:s}),r.a.createElement(We,{handleRegister:i})),r.a.createElement(Ne.a,{item:!0,container:!0,maxwidth:"false",direction:"column",justify:"flex-end",style:{height:"30vh",maxHeight:"30vh"}},r.a.createElement(Ne.a,{item:!0,zeroMinWidth:!0},r.a.createElement(Ge,null)))))))}var Qe=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",isSubmitting:!1,redirect:null},n.handleUsernameUpdate=n.handleUsernameUpdate.bind(Object(we.a)(n)),n.handlePasswordUpdate=n.handlePasswordUpdate.bind(Object(we.a)(n)),n.handleForgotPassword=n.handleForgotPassword.bind(Object(we.a)(n)),n.handleRegister=n.handleRegister.bind(Object(we.a)(n)),n.handleResetFlow=n.handleResetFlow.bind(Object(we.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(we.a)(n)),n}return Object(f.a)(a,[{key:"handleUsernameUpdate",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordUpdate",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.flow,n=t.authActions;if(this.setState({isSubmitting:!0,spinnerMessage:"Signing you on...",errorMessage:""}),console.log("flow"),console.log(a),a.isCompleted())window.location.assign(a.resumeUrl);else{var s=m.a.get(a.getLinks(),["usernamePassword.check","href"],null);if(s)return n.signOn(s,this.state.username,this.state.password).then((function(t){return console.log("newflow then"),e.setState({isSubmitting:!1}),console.log("newflow before promise"),Promise.resolve(t)})).catch((function(t){var a=m.a.get(t,"details[0].code",null);if(m.a.isEqual(a,T.INVALID_CREDENTIALS))e.setState({errorMessage:"Incorrect username or password. Please try again.",isSubmitting:!1});else if(m.a.isEqual(a,T.PASSWORD_LOCKED_OUT)){var n=m.a.get(t,"details[0].innerError.secondsUntilUnlock",null),s=n>60?"".concat(Math.floor(n/60)," minutes"):"".concat(n," seconds"),i="Too many unsuccessful sign-on attempts. Your account will unlock in ".concat(s,".");e.setState({redirect:r.a.createElement(h.b,{to:{pathname:tt.UNABLE_TO_SIGN_IN,state:{errorMessage:i}}}),isSubmitting:!1})}else e.setState({errorMessage:"An unexpected error has occurred."})}));this.setState({errorMessage:"An unexpected error has occurred. There is no user validation link in the flow."})}}},{key:"handleResetFlow",value:function(){var e=this,t=this.props,a=t.flow,n=t.authActions,r=m.a.get(a.getLinks(),["session.reset","href"],null);if(r)return n.resetFlow(r).catch((function(t){e.setState({errorMessage:"An unexpected error has occurred. ".concat(t)})}));this.setState({errorMessage:"An unexpected error has occurred. There is no session reset link in the flow."})}},{key:"handleForgotPassword",value:function(){this.setState({redirect:r.a.createElement(h.b,{from:tt.SIGN_ON,to:tt.FORGOT_PASSWORD_USERNAME})})}},{key:"handleRegister",value:function(){this.setState({redirect:r.a.createElement(h.b,{from:tt.SIGN_ON,to:tt.REGISTER})})}},{key:"handlePasswordReset",value:function(){this.setState({redirect:r.a.createElement(h.b,{from:tt.SIGN_ON,to:tt.CHANGE_PASSWORD})})}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.redirect,s=e.errorMessage,i=this.props,o=i.flow,l=i.message,c=(s||l)&&(s||l&&l.isError?r.a.createElement("div",{className:"alert alert-danger"},s||l.content):r.a.createElement("div",{className:"alert alert-success"},l.content));if(o){if(o.isPasswordExpired())return r.a.createElement(h.b,{to:{pathname:"/expired",state:{username:t,currentPassword:a}}});m.a.get(o.getLinks(),["password.forgot","href"],null)&&this.handleForgotPassword,m.a.get(o.getLinks(),["user.register"],null)&&this.handleRegister,m.a.get(o.getLinks(),["password.reset"],null)&&this.handlePasswordReset,m.a.get(o.getLinks(),["session.reset"],null)&&this.handleResetFlow;return r.a.createElement(Ae.a,{display:"flex",maxWidth:!1,disableGutters:!0},n,c,r.a.createElement(Ye,{handleUsernameUpdate:this.handleUsernameUpdate,handlePasswordUpdate:this.handlePasswordUpdate,handleForgotPassword:this.handleForgotPassword,handleSubmit:this.handleSubmit,handlePasswordReset:this.handlePasswordReset,handleRegister:this.handleRegister}))}return r.a.createElement("div",{className:"container"},n,r.a.createElement("div",null,"Waiting for the flow ..."))}}]),a}(r.a.Component),ze=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this)).state={username:e.username},n.handleUsernameUpdate=n.handleUsernameUpdate.bind(Object(we.a)(n)),n.doSubmit=n.doSubmit.bind(Object(we.a)(n)),n.doCancel=n.doCancel.bind(Object(we.a)(n)),n}return Object(f.a)(a,[{key:"handleUsernameUpdate",value:function(e){this.setState({username:e.target.value})}},{key:"doSubmit",value:function(e){e.preventDefault();var t=this.state.username;this.props.handleSubmit(t)}},{key:"doCancel",value:function(e){e.preventDefault(),this.props.handleCancel()}},{key:"render",value:function(){var e=this.state.username,t=this.props.children;return r.a.createElement("div",null,t,r.a.createElement("form",{className:"form",onSubmit:this.doSubmit},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",className:"text-input input-field",id:"username",name:"username",placeholder:"Username",value:e,onChange:this.handleUsernameUpdate,autoFocus:!0})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"button","data-id":"submit-btn",disabled:!e,type:"submit"},"Submit")),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"button","data-id":"cancel-btn",onClick:this.doCancel},"Cancel"))))}}]),a}(r.a.Component);ze.defaultProps={username:"",children:null};var Be=ze,Xe=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={isSubmitting:!1,redirect:null},n.handleSubmit=n.handleSubmit.bind(Object(we.a)(n)),n.handleCancel=n.handleCancel.bind(Object(we.a)(n)),n}return Object(f.a)(a,[{key:"handleSubmit",value:function(e){var t=this,a=this.props,n=a.flow,r=a.authActions;this.setState({isSubmitting:!0,spinnerMessage:"Processing password recovery request..."});var s=m.a.get(n.getLinks(),["password.forgot","href"],null);if(s)return r.forgotPassword(s,e).catch((function(e){m.a.isEqual(m.a.get(e,"code",null),"NOT_FOUND")?t.setState({isSubmitting:!1,errorMessage:"Such user name could not be found. Please try again."}):t.setState({errorMessage:"An unexpected error has occurred while processing password recovery request."})}));this.setState({errorMessage:"There is no forgot password link in the flow. Your password policy may have disabled password recovery. Please check your application configuration in PingOne for Customers Admin Console. "})}},{key:"handleCancel",value:function(){this.setState({redirect:r.a.createElement(h.b,{from:tt.FORGOT_PASSWORD_USERNAME,to:tt.SIGN_ON}),isSubmitting:!1})}},{key:"render",value:function(){var e=this.state,t=e.isSubmitting,a=e.spinnerMessage,n=e.errorMessage,s=e.redirect,i=e.username,o=this.props.message,l=(n||o)&&(n||o&&o.isError?r.a.createElement("div",{className:"alert alert-danger"},n||o.content):r.a.createElement("div",{className:"alert alert-info"},o.content)),c=r.a.createElement(Be,{username:i,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel},l);return t?r.a.createElement("div",{className:"alert alert-info"},a,r.a.createElement("span",{className:"loader"})):r.a.createElement("div",null,s,c)}}]),a}(r.a.Component),Ke=function(e){var t=e.messageType,a=e.message;return r.a.createElement("div",null,r.a.createElement("div",{className:("error"===t?"alert-danger":"alert-success")+" alert"},a))},Je=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={currentPassword:"",newPassword:"",newPasswordVerify:"",errorMessage:"",isValidatingCredentials:!1,saveAttempted:!1,newPasswordFocused:!1,redirect:null},n.handleCurrentPasswordUpdate=n.handleCurrentPasswordUpdate.bind(Object(we.a)(n)),n.handleNewPasswordUpdate=n.handleNewPasswordUpdate.bind(Object(we.a)(n)),n.handleNewPasswordVerifyUpdate=n.handleNewPasswordVerifyUpdate.bind(Object(we.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(we.a)(n)),n.showTooltipReqs=n.showTooltipReqs.bind(Object(we.a)(n)),n.hideTooltipReqs=n.hideTooltipReqs.bind(Object(we.a)(n)),n}return Object(f.a)(a,[{key:"handleCurrentPasswordUpdate",value:function(e){this.setState({currentPassword:e.target.value})}},{key:"handleNewPasswordUpdate",value:function(e){this.setState({newPassword:e.target.value})}},{key:"handleNewPasswordVerifyUpdate",value:function(e){this.setState({newPasswordVerify:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.currentPassword,s=a.newPasswordVerify,i=a.newPassword,o=this.props,l=o.flow,c=o.authActions,d=m.a.get(l.getLinks(),["password.reset","href"],null);if(d){if(this.setState({saveAttempted:!0}),s!==i){var u="New passwords don\u2019t match. Please try again.";return this.setState({errorMessage:u}),Promise.reject(new Error(u))}return new Promise((function(e){return t.setState({isValidatingCredentials:!0},(function(){return e()}))})).then((function(){c.changeUserPassword(d,"user",n,i)})).catch((function(e){var a=m.a.get(e,"details[0].code",null);if(m.a.isEqual(a,T.INVALID_VALUE)){var n=m.a.get(e,"details[0].target",null);if(m.a.isEqual(n,"currentPassword"))t.setState({currentPassword:"",newPassword:"",newPasswordVerify:"",errorMessage:"Incorrect current password. Please try again."});else if(m.a.isEqual(n,"newPassword")){var s=m.a.get(e,"details[0].innerError.unsatisfiedRequirements",[])[0];t.setState({currentPassword:"",newPassword:"",newPasswordVerify:"",errorMessage:A(s,l.getPasswordPolicy())})}else t.setState({errorMessage:"An unexpected error has occurred."})}else m.a.isEqual(a,T.PASSWORD_LOCKED_OUT)?t.setState({redirect:r.a.createElement(h.b,{from:tt.CHANGE_PASSWORD,to:{pathname:tt.UNABLE_TO_SIGN_IN,state:{errorMessage:"Too many unsuccessful sign-on attempts. Account is now locked."}}})}):t.setState({errorMessage:"An unexpected error has occurred."});return Promise.resolve(e)})).then((function(){return t.setState({isValidatingCredentials:!1})}))}this.setState({errorMessage:"An unexpected error has occurred. There is no password reset link in the flow."})}},{key:"showTooltipReqs",value:function(){this.setState({newPasswordFocused:!0})}},{key:"hideTooltipReqs",value:function(){this.setState({newPasswordFocused:!1})}},{key:"render",value:function(){var e=this.state,t=e.currentPassword,a=e.newPassword,n=e.newPasswordVerify,s=e.errorMessage,i=e.isValidatingCredentials,o=e.redirect,l=e.saveAttempted,c=e.newPasswordFocused,d=this.props,u=d.flow,h=d.feedbackMessage,p=d.message,f=_(u.getPasswordPolicy(),a),g=!!a&&m.a.reduce(f,(function(e,t){return e&&t.isValid}),!0),w=I(f,u),E=(s||p)&&(s||p&&p.isError?r.a.createElement("div",{className:"alert alert-danger"},s||p.content):r.a.createElement("div",{className:"alert alert-success"},p.content)),v=a&&n&&!m.a.isEqual(a,n);return i?r.a.createElement("div",{className:"alert alert-info"},"Processing changing password request...",r.a.createElement("span",{className:"loader"})):r.a.createElement("div",null,o,r.a.createElement("h1",{className:"heading"},"Change Password"),r.a.createElement("div",{className:"alert alert-info"},h),E,r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",null,"Current Password"),r.a.createElement("input",{type:"password",className:"text-input",id:"password",name:"password",placeholder:"Current Password",value:t,onChange:this.handleCurrentPasswordUpdate})),r.a.createElement("div",{className:!a||g||c?" input-field input-valid":" input-field input-invalid"},r.a.createElement("label",null,"New Password"),r.a.createElement("input",{type:"password",className:"text-input",id:"new",name:"new",placeholder:"New Password",value:a,onChange:this.handleNewPasswordUpdate,onFocus:this.showTooltipReqs,onBlur:this.hideTooltipReqs,autoFocus:l}),f.length>0&&c&&!g&&r.a.createElement("div",{className:"tooltip show"},r.a.createElement("h4",{className:"heading"},"Minimum Password Requirements:"),r.a.createElement("div",{className:"requirements"},w))),r.a.createElement("div",{className:a&&!v?" input-field input-valid":" input-field input-invalid"},r.a.createElement("label",null,"Verify New Password"),r.a.createElement("input",{type:"password",className:"text-input",id:"verify",name:"verify",placeholder:"Verify New Password",value:n,onChange:this.handleNewPasswordVerifyUpdate}),v&&r.a.createElement("div",{className:"tooltip show"},r.a.createElement("i",{className:"fa fa-warning",style:{color:"red"}}),r.a.createElement("span",{className:"requirement__name"},"Passwords don\u2019t match. Please try again."))),console.log(!t),console.log(!a),console.log(!n),console.log(v),console.log(!g),console.log(),console.log(a),console.log(n),console.log(),r.a.createElement("button",{className:"button",disabled:!t||!a||!n||v||!g,type:"submit"},"Save")))}}]),a}(r.a.Component),Ze=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={recoveryCode:"",newPassword:"",newPasswordVerify:"",feedbackMessage:"If you have an active account with a valid email address, you will receive an email with a recovery code which you may enter here, along with a new password. If you do not have an account or email, please contact your administrator to recover your password.",errorMessage:"",isSubmitting:!1,isResending:!1,newPasswordFocused:!1,redirect:null},n.handleRecoveryCodeUpdate=n.handleRecoveryCodeUpdate.bind(Object(we.a)(n)),n.handleNewPasswordUpdate=n.handleNewPasswordUpdate.bind(Object(we.a)(n)),n.handleNewPasswordVerifyUpdate=n.handleNewPasswordVerifyUpdate.bind(Object(we.a)(n)),n.handleResend=n.handleResend.bind(Object(we.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(we.a)(n)),n.handleCancel=n.handleCancel.bind(Object(we.a)(n)),n.showTooltipReqs=n.showTooltipReqs.bind(Object(we.a)(n)),n.hideTooltipReqs=n.hideTooltipReqs.bind(Object(we.a)(n)),n}return Object(f.a)(a,[{key:"handleRecoveryCodeUpdate",value:function(e){this.setState({recoveryCode:e.target.value})}},{key:"handleNewPasswordUpdate",value:function(e){this.setState({newPassword:e.target.value})}},{key:"handleNewPasswordVerifyUpdate",value:function(e){this.setState({newPasswordVerify:e.target.value})}},{key:"handleResend",value:function(){var e=this,t=this.props,a=t.flow,n=t.authActions,r=m.a.get(a.getLinks(),["password.sendRecoveryCode","href"],null);if(r)return this.setState({isResending:!0}),n.sendRecoveryCode(r).then((function(t){return new V(t).isRecoveryCodeRequired()?(e.setState({feedbackMessage:"Recovery code resent. If an email address is associated with your account, you will receive an email with a recovery code which you may enter here, along with a new password. If you do not have an account or email, please contact your administrator to recover your password.",recoveryCode:"",newPassword:"",newPasswordVerify:"",errorMessage:"",isResending:!1}),Promise.resolve()):Promise.reject(new Error("Could not understand flow"))})).catch((function(t){e.setState({feedbackMessage:"Enter recovery code once received, along with a new password.",errorMessage:"Unable to resend recovery code. Please try again.",isResending:!1})}));this.setState({errorMessage:"An unexpected error has occurred. There is no send recovery code link in the flow."})}},{key:"handleCancel",value:function(e){e.preventDefault();var t=this.props.authActions;this.setState({redirect:r.a.createElement(h.b,{from:tt.RECOVERY_CODE_AND_PASSWORD,to:tt.SIGN_ON}),isSubmitting:!1,isResending:!1}),t.updateFlow(null)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.recoveryCode,r=a.newPasswordVerify,s=a.newPassword,i=this.props,o=i.flow,l=i.authActions,c=m.a.get(o.getLinks(),["password.recover","href"],null);if(c){if(r!==s)return this.setState({errorMessage:"New passwords don\u2019t match. Please try again."}),Promise.reject();if(null!==c)return new Promise((function(e){return t.setState({isSubmitting:!0},(function(){return e()}))})).then((function(){return l.recoverUserPassword(c,n,s)})).then((function(e){t.setState({isSubmitting:!1})})).catch((function(e){var a=m.a.get(e,"details[0].code",null);if(m.a.isEqual(a,"INVALID_VALUE")){var n=m.a.get(e,"details[0].target",null);if(m.a.isEqual(n,"recoveryCode"))t.setState({recoveryCode:"",newPassword:"",newPasswordVerify:"",errorMessage:"Incorrect recovery code. Please try again.",isSubmitting:!1});else if(m.a.isEqual(n,"newPassword")){var r=m.a.get(e,"details[0].innerError.unsatisfiedRequirements",[])[0];t.setState({newPassword:"",newPasswordVerify:"",errorMessage:A(r,o.getPasswordPolicy()),feedbackMessage:"Please try again to set a new password with existed recovery code",isSubmitting:!1})}else t.setState({errorMessage:"An unexpected error has occurred.",isSubmitting:!1})}else t.setState({errorMessage:"An unexpected error has occurred.",isSubmitting:!1})}));this.setState({errorMessage:"An unexpected error has occurred. There is no password recovery link in the flow."})}else this.setState({errorMessage:"An unexpected error has occurred. There is no password recovery link in the flow."})}},{key:"showTooltipReqs",value:function(){this.setState({newPasswordFocused:!0})}},{key:"hideTooltipReqs",value:function(){this.setState({newPasswordFocused:!1})}},{key:"render",value:function(){var e=this.state,t=e.recoveryCode,a=e.newPassword,n=e.newPasswordVerify,s=e.feedbackMessage,i=e.errorMessage,o=e.redirect,l=e.newPasswordFocused,c=e.isResending,d=e.isSubmitting,u=this.props,h=u.flow,p=u.message,f=_(h.getPasswordPolicy(),a),g=!!a&&m.a.reduce(f,(function(e,t){return e&&t.isValid}),!0),w=I(f,h),E=(i||p)&&(i||p&&p.isError?r.a.createElement("div",{className:"alert alert-danger"},i||p.content):r.a.createElement("div",{className:"alert alert-success"},p.content)),v=a&&n&&!m.a.isEqual(a,n),b=function(){return d?"Processing recovery request...":c?"Processing resending recovery request...":void 0};return d||c?r.a.createElement("div",{className:"alert alert-info"},b,r.a.createElement("span",{className:"loader"})):r.a.createElement("div",null,o,r.a.createElement("h1",{className:"heading","data-id":"recovery-heading"},"Enter New Password"),r.a.createElement("div",{className:"alert alert-info"},s),E,r.a.createElement("form",{className:"form"},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",null,"Recovery Code"),r.a.createElement("input",{type:"password",className:"text-input",id:"recovery-code",name:"recovery-code",placeholder:"Recovery Code",value:t,onChange:this.handleRecoveryCodeUpdate})),r.a.createElement("div",{className:(!a||g||l?"input-valid":"input-invalid")+" input-field"},r.a.createElement("label",null,"New Password"),r.a.createElement("input",{type:"password",className:"text-input",id:"new",name:"new",placeholder:"New Password",value:a,onChange:this.handleNewPasswordUpdate,onFocus:this.showTooltipReqs,onBlur:this.hideTooltipReqs}),f.length>0&&l&&!g&&r.a.createElement("div",{className:"tooltip show"},r.a.createElement("h4",{className:"heading"},"Minimum Password Requirements:"),r.a.createElement("div",{className:"requirements"},w))),r.a.createElement("div",{className:(n&&!v?"input-valid":"input-invalid")+" input-field"},r.a.createElement("label",null,"Verify New Password"),r.a.createElement("input",{type:"password",className:"text-input",id:"verify",name:"verify",placeholder:"Verify New Password",value:n,onChange:this.handleNewPasswordVerifyUpdate}),v&&r.a.createElement("div",{className:"tooltip show"},r.a.createElement("i",{className:"fa fa-warning",style:{color:"red"}}),r.a.createElement("span",{className:"requirement__name"},"Passwords don\u2019t match. Please try again."))),r.a.createElement("div",{className:"input-field"},console.log(t),console.log(a),console.log(n),console.log(v),console.log(g),r.a.createElement("button",{id:"save",className:"button",onClick:this.handleSubmit,disabled:!t||!a||!n||v||!g,type:"submit"},"Save")),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"button","data-id":"cancel-btn",onClick:this.handleCancel},"Cancel"))),r.a.createElement("div",{className:"input-field"},"Didn\u2019t receive an email?"," ",r.a.createElement("a",{"data-id":"resend-email",href:"#",onClick:this.handleResend},"Resend")))}}]),a}(r.a.Component),$e=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={username:"",email:"",password:"",passwordVerify:"",redirect:null,errorMessage:"",isRegistering:!1,passwordFocused:!1},n.handleUsernameUpdate=n.handleUsernameUpdate.bind(Object(we.a)(n)),n.handleEmailUpdate=n.handleEmailUpdate.bind(Object(we.a)(n)),n.handlePasswordUpdate=n.handlePasswordUpdate.bind(Object(we.a)(n)),n.handlePasswordVerifyUpdate=n.handlePasswordVerifyUpdate.bind(Object(we.a)(n)),n.handleSignInClick=n.handleSignInClick.bind(Object(we.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(we.a)(n)),n.showTooltipReqs=n.showTooltipReqs.bind(Object(we.a)(n)),n.hideTooltipReqs=n.hideTooltipReqs.bind(Object(we.a)(n)),n}return Object(f.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.flow,r=a.authActions,s=this.state,i=s.username,o=s.email,l=s.password,c=m.a.get(n.getLinks(),["user.register","href"],null);if(c)return this.setState({isRegistering:!0}),r.registerUser(c,i,o,l).then((function(e){t.setState({isRegistering:!1})})).catch((function(e){t.setState({isRegistering:!1});var a=m.a.get(e,"details[0].code",null);if(m.a.isEqual(a,T.INVALID_VALUE)){var r=m.a.get(e,"details[0].target",null);if(m.a.isEqual(r,"username"))t.setState({errorMessage:"Invalid character in username."});else if(m.a.isEqual(r,"email"))t.setState({errorMessage:"Invalid email address."});else if(m.a.isEqual(r,"password")){var s=m.a.get(e,"details[0].innerError.unsatisfiedRequirements",[])[0];t.setState({errorMessage:A(s,n.getPasswordPolicy()),password:"",passwordVerify:""})}else t.setState({errorMessage:"An unexpected error has occurred."})}else m.a.isEqual(a,T.UNIQUENESS_VIOLATION)?t.setState({errorMessage:"Username already taken."}):t.setState({errorMessage:"An unexpected error has occurred."})}));this.setState({errorMessage:"An unexpected error has occurred. There is no user registration link in the flow."})}},{key:"handleUsernameUpdate",value:function(e){this.setState({username:e.target.value})}},{key:"handleEmailUpdate",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordUpdate",value:function(e){this.setState({password:e.target.value})}},{key:"handlePasswordVerifyUpdate",value:function(e){this.setState({passwordVerify:e.target.value})}},{key:"handleSignInClick",value:function(){this.setState({redirect:r.a.createElement(h.b,{from:tt.REGISTER,to:tt.SIGN_ON})})}},{key:"showTooltipReqs",value:function(){this.setState({passwordFocused:!0})}},{key:"hideTooltipReqs",value:function(){this.setState({passwordFocused:!1})}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,s=e.passwordVerify,i=e.redirect,o=e.errorMessage,l=e.isRegistering,c=e.passwordFocused,d=this.props,u=d.flow,h=d.message,p=_(u.getPasswordPolicy(),n),f=I(p,u),g=!!n&&m.a.reduce(p,(function(e,t){return e&&t.isValid}),!0),w=n!==s,E=!!(t&&a&&n&&s&&!w&&g),v=(o||h)&&(o||h&&h.isError?r.a.createElement("div",{className:"alert alert-danger"},o||h.content):r.a.createElement("div",{className:"alert alert-info"},h.content));return l?r.a.createElement("div",{className:"alert"}," Registering..."):r.a.createElement("div",null,i,r.a.createElement("h1",{"data-id":"register-heading",className:"heading"},"Create Your Profile"),r.a.createElement("div",{className:"input-field"},"Enter the required information below."),v,r.a.createElement("div",null,r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",className:"text-input",id:"username",name:"username",placeholder:"Username",value:t,onChange:this.handleUsernameUpdate,maxLength:128,autoFocus:!0})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",null,"Email Address"),r.a.createElement("input",{type:"text",className:"text-input",id:"email",name:"email",placeholder:"Email Address",value:a,onChange:this.handleEmailUpdate})),r.a.createElement("div",{className:(n&&g&&!c?"input-valid":"input-invalid")+" input-field"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"text-input",id:"password",name:"password",placeholder:"Password",value:n,onChange:this.handlePasswordUpdate,onFocus:this.showTooltipReqs,onBlur:this.hideTooltipReqs}),p.length>0&&c&&!g&&r.a.createElement("div",{className:"tooltip show"},r.a.createElement("h4",{className:"heading"},"Minimum Password Requirements:"),r.a.createElement("div",{className:"requirements"},f))),r.a.createElement("div",{className:(s&&!w?"input-valid":"input-invalid")+" input-field"},r.a.createElement("label",null,"Verify Password"),r.a.createElement("input",{type:"password",className:"text-input",id:"verify",name:"verify",placeholder:"Verify Password",value:s,onChange:this.handlePasswordVerifyUpdate}),w&&r.a.createElement("div",{className:"tooltip show"},r.a.createElement("i",{className:"fa fa-warning",style:{color:"red"}}),r.a.createElement("span",{className:"requirement__name"},"Passwords don\u2019t match. Please try again."))),r.a.createElement("button",{"data-id":"register-button",className:"button",onClick:this.handleSubmit,type:"submit",disabled:!E},"Save"))),r.a.createElement("div",{className:"input-field"},"Already have an account?"," ",r.a.createElement("a",{"data-id":"signInBtn",href:"#",onClick:this.handleSignInClick},"Sign in")))}}]),a}(r.a.Component),et=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={verificationCode:"",isVerifying:!1,errorMessage:"",isResending:!1},n.handleResendEmail=n.handleResendEmail.bind(Object(we.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(we.a)(n)),n.handleVerificationCodeUpdate=n.handleVerificationCodeUpdate.bind(Object(we.a)(n)),n}return Object(f.a)(a,[{key:"handleVerificationCodeUpdate",value:function(e){this.setState({verificationCode:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props,n=a.flow,r=a.authActions,s=this.state.verificationCode;this.setState({isVerifying:!0});var i=m.a.get(n.getLinks()["user.verify"],"href",null);if(i)return r.verifyUser(i,s).then((function(e){t.setState({isVerifying:!1})})).catch((function(e){t.setState({isVerifying:!1});var a=m.a.get(e,"details[0].code",null);if(m.a.isEqual(a,T.INVALID_VALUE)&&"verificationCode"===m.a.get(e,"details[0].target",null))return t.setState({errorMessage:"Incorrect verification code. Please try again.",verificationCode:""}),Promise.resolve(e);t.setState({errorMessage:"An unexpected error occurred. Please try again.",verificationCode:""})}));this.setState({errorMessage:"An unexpected error has occurred. There is no user verification link in the flow."})}},{key:"handleResendEmail",value:function(){var e=this,t=this.props,a=t.flow,n=t.authActions,r=m.a.get(a.getLinks()["user.sendVerificationCode"],"href",null);if(r)return this.setState({isResending:!0}),n.sendVerificationCode(r).then((function(t){e.setState({errorMessage:"",isResending:!1}),Promise.resolve(t)})).catch((function(t){e.setState({errorMessage:"Something went wrong when trying to resend a verification code.",isResending:!1})}));this.setState({errorMessage:"An unexpected error has occurred. There is no send verification code link in the flow."})}},{key:"render",value:function(){var e=this.state,t=e.verificationCode,a=e.isVerifying,n=e.errorMessage,s=e.isResending,i=this.props.message,o=!!t,l=(n||i)&&(n||i&&i.isError?r.a.createElement("div",{className:"alert alert-danger"},n||i.content):r.a.createElement("div",{className:"alert alert-success"},i.content)),c=s?"Resending verification code...":"Verifying...";return a||s?r.a.createElement("div",{className:"alert alert-info"},c,r.a.createElement("span",{className:"loader"})):r.a.createElement("div",null,r.a.createElement("h1",{className:"heading","data-id":"verification-heading"},"Thank You!"),l,r.a.createElement("div",{className:"input-field"},r.a.createElement("div",{className:"alert alert-info"},"We've sent a verification email to your email address. Please verify your email to finish setting up your PingOne account."),r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",null,"Verification Code"),r.a.createElement("input",{type:"password",className:"text-input",id:"verification-code",name:"verification-code",placeholder:"Verification Code",value:t,onChange:this.handleVerificationCodeUpdate})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{"data-id":"verify-button",className:"button",onClick:this.handleSubmit,type:"submit",disabled:!o},"Verify")))),r.a.createElement("div",{className:"input-field"},"Didn\u2019t receive an email? ",r.a.createElement("a",{"data-id":"resend-email",href:"#",onClick:this.handleResendEmail},"Resend")))}}]),a}(r.a.Component),tt={SIGN_ON:"/",EXPIRED:"/expired",UNABLE_TO_SIGN_IN:"/unableToSignIn",CHANGE_PASSWORD:"/changePassword",REGISTER:"/register",VERIFY:"/verify",FORGOT_PASSWORD_USERNAME:"/forgotPasswordUsername",RECOVERY_CODE_AND_PASSWORD:"/recoveryCode"},at={PASSWORD_EXPIRED:[tt.EXPIRED],MUST_CHANGE_PASSWORD:[tt.CHANGE_PASSWORD],USERNAME_PASSWORD_REQUIRED:[tt.SIGN_ON,tt.REGISTER,tt.VERIFY,tt.UNABLE_TO_SIGN_IN,tt.FORGOT_PASSWORD_USERNAME],PASSWORD_REQUIRED:[tt.SIGN_ON],RECOVERY_CODE_REQUIRED:[tt.RECOVERY_CODE_AND_PASSWORD],VERIFICATION_CODE_REQUIRED:[tt.VERIFY]},nt=function(e){Object(fe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={errorMessage:""},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=k("environmentId"),a=k("flowId"),n=k("error"),r=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;n?this.setState({errorMessage:JSON.parse(decodeURIComponent(n))}):r.test(t)?n||r.test(a)?this.props.authState.flow||this.props.authActions.getFlow(t,a).catch((function(t){m.a.isEqual(m.a.get(t,"code",null),"NOT_FOUND")?e.setState({isSubmitting:!1,errorMessage:"There is no such flow resource with ".concat(a," id.")}):e.setState({errorMessage:"An unexpected error has occurred while retrieving flow resource."})})):this.setState({errorMessage:"Invalid flowId parameter: ".concat(a,". flowId should be a valid UUID.")}):this.setState({errorMessage:"Invalid environmentId parameter: ".concat(t,". environmentId should be a valid UUID.")})}},{key:"render",value:function(){var e=this,t=this.state.errorMessage,a=this.props,n=a.authState,s=a.location;a.branding;if(t)return r.a.createElement(Ke,{messageType:"error",message:t});var i=m.a.get(n,"flow",null),o=m.a.get(n,"message",null);if(i&&(i.isCompleted()||i.isFailed()))return window.location.assign(i.resumeUrl),window.history.replaceState({},"","#done"),r.a.createElement("p",null,"done");if(i){var l=at[m.a.get(i,"status","unknown")];if(!l)return console.log("flow completed or failed"),r.a.createElement("div",null,r.a.createElement(h.b,{to:tt.SIGN_ON}));if(!m.a.some(l,(function(e){return m.a.startsWith(s.pathname,e)})))return r.a.createElement("div",null,r.a.createElement(h.b,{to:l[0]}))}return i&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row routes"},r.a.createElement(h.c,{path:tt.SIGN_ON,exact:!0,render:function(t){return r.a.createElement(Qe,Object.assign({},t,e.props,{flow:i,message:o}))}}),r.a.createElement(h.c,{path:tt.CHANGE_PASSWORD,exact:!0,render:function(t){return r.a.createElement(Je,Object.assign({},t,e.props,{flow:i,message:o}))}}),r.a.createElement(h.c,{path:tt.FORGOT_PASSWORD_USERNAME,exact:!0,render:function(t){return r.a.createElement(Xe,Object.assign({},t,e.props,{flow:i,message:o}))}}),r.a.createElement(h.c,{path:tt.EXPIRED,exact:!0,render:function(t){return r.a.createElement(Je,Object.assign({},t,e.props,{flow:i,message:o,feedbackMessage:"Your password has expired. Please create a new one."}))}}),r.a.createElement(h.c,{path:tt.REGISTER,exact:!0,render:function(t){return r.a.createElement($e,Object.assign({},t,e.props,{flow:i,message:o}))}}),r.a.createElement(h.c,{path:tt.VERIFY,exact:!0,render:function(t){return r.a.createElement(et,Object.assign({},t,e.props,{flow:i,message:o}))}}),r.a.createElement(h.c,{path:tt.RECOVERY_CODE_AND_PASSWORD,exact:!0,render:function(t){return r.a.createElement(Ze,Object.assign({},t,e.props,{flow:i,message:o}))}}),r.a.createElement(h.c,{path:tt.UNABLE_TO_SIGN_IN,exact:!0,component:Ke})))}}]),a}(r.a.Component);nt.defaultProps={authState:null};var rt=nt,st=Object(h.d)(Object(i.b)((function(e){return{authState:m.a.get(e,"auth",null)}}),(function(e){return{authActions:pe(e)}}))(rt)),it=a(48),ot=a(162),lt=a(163),ct=a.n(lt),dt={flow:null,message:{isError:!1,content:null},isAuthenticated:!1},ut={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case he.UPDATE_FLOW:return Object(o.a)(Object(o.a)({},e),{},{flow:t.payload.result,isAuthenticated:t.payload.isAuthenticated,message:{content:t.payload.message}});case he.UNRECOVERABLE_ERROR:return Object(o.a)(Object(o.a)({},e),{},{message:{isError:!0,content:t.payload.error}});default:return e}}},mt=window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e},ht=Object(it.d)(Object(it.a)(ot.a,ct.a),mt)(it.e)(Object(it.c)(ut));Object(s.render)(r.a.createElement(i.a,{store:ht},r.a.createElement(h.a,null,r.a.createElement(st,d))),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.4808b745.chunk.js.map