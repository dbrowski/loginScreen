{"version":3,"sources":["logo.png","config.js","sdk/helpers.js","sdk/index.js","sdk/api.js","sdk/actions.js","components/DragNDrop.js","components/InputForm/EmailInput.js","components/InputForm/PasswordInput.js","components/InputForm/ForgotPassword.jsx","components/InputForm/NoAccount.jsx","components/InputForm/Copyright.js","components/SignInPage.js","components/userLogin.jsx","components/usernameValidator.jsx","components/forgotPassword.jsx","components/message.jsx","components/updatePassword.jsx","components/recoveryCodeAndPassword.jsx","components/registration.jsx","components/verificationCode.jsx","components/auth.jsx","containers/container.js","reducers/index.js","index.js"],"names":["module","exports","common","branding","logo","require","config","AUTH","API","process","REACT_APP_STAGE","RequiredProperties","minCharCheck","password","charSet","min","count","_","sumBy","char","includes","console","log","validate","passwordPolicy","policyCriterion","maxRepeatedCharCount","get","length","i","currentChar","currentCharCount","j","minUniqueCharCount","Set","each","add","size","lengthValidationRequirements","max","minComplexity","bigInt","times","hasLowerLetter","hasUpperLetter","hasDigit","hasSymbol","hasOther","searchSpaceDepth","searchSpaceSize","guessesForLength","pow","compare","passwordRequirementsValidator","newPassword","clientValidatedRequirements","filter","keys","policy","minCharReqs","key","value","push","map","policyName","name","isValid","getServerValidatedRequirementMessage","failedReq","historyCount","generateRequirementsTooltip","flow","icon","className","style","color","getPasswordPolicyMessage","getURLParameter","paramName","decomposeUrl","window","location","href","queryParams","url","a","document","createElement","host","pathname","search","parseQueryParams","hash","searchStr","params","replace","split","returnVal","forEach","param","paramSplit","STATUS","SUCCESS","UNAUTHORIZED","COMPLETED","USERNAME_PASSWORD_REQUIRED","PASSWORD_REQUIRED","INVALID_CREDENTIALS","NO_PASSWORD","PASSWORD_EXPIRED","PASSWORD_LOCKED_OUT","MUST_CHANGE_PASSWORD","PASSWORD_REQUIREMENTS_NOT_MET","VERIFICATION_CODE_REQUIRED","RECOVERY_CODE_REQUIRED","INVALID_VALUE","UNIQUENESS_VIOLATION","UNKNOWN","FAILED","Flow","id","status","_links","_embedded","resumeUrl","this","links","embedded","isEqual","user","requirement","generatePasswordPolicyMessage","maxRepeatedCharacters","minUniqueCharacters","minNumeric","minLower","minUpper","minSpecial","pingPost","apiPath","contentType","body","post","Promise","resolved","rejected","request","withCredentials","send","set","end","err","res","getBody","headers","req","getBaseApiUrl","useAuthUrl","environmentId","flowId","flowUrl","username","currentPassword","recoveryCode","email","verificationCode","types","UPDATE_FLOW","UNRECOVERABLE_ERROR","updateFlowAction","result","isAuthenticated","message","type","payload","updateFlow","dispatch","getFlow","api","then","resolve","resetFlow","signOn","forgotPassword","sendRecoveryCode","recoverUserPassword","changeUserPassword","sendVerificationCode","verifyUser","registerUser","DragNDrop","useState","file","setFile","scale","setScale","classes","makeStyles","theme","root","height","dropzoneArea","maxHeight","width","display","alignItems","justifyContent","dropzoneAreaText","fontSize","image","backgroundImage","backgroundRepeat","backgroundColor","palette","grey","backgroundSize","backgroundPosition","useStyles","onDrop","acceptedFiles","newFile","uploadedFile","URL","createObjectURL","handleChange","event","newValue","Container","maxWidth","disableGutters","Grid","container","wrap","spacing","justify","item","xs","overflow","position","border","rotate","minHeight","minWidth","Fab","Slider","onChange","aria-labelledby","dropzoneClass","dropzoneParagraphClass","showPreviews","showPreviewsInDropzone","filesLimit","maxFileSize","dropzoneText","EmailInput","props","TextField","variant","margin","required","fullWidth","label","autoComplete","autoFocus","handleUsernameUpdate","handlePasswordUpdate","ForgotPassword","Link","onClick","handleForgotPassword","NoAccount","handleRegister","Typography","align","Date","getFullYear","paper","flexDirection","avatar","secondary","main","form","marginTop","submit","SignInPage","handleSubmit","handlePasswordReset","component","CssBaseline","sm","md","lg","xl","Paper","elevation","square","Avatar","noValidate","FormControlLabel","control","Checkbox","Button","data-id","maxwidth","direction","zeroMinWidth","UserLogin","state","isSubmitting","redirect","bind","handleResetFlow","setState","target","authActions","spinnerMessage","errorMessage","isCompleted","assign","validatePasswordUrl","getLinks","newflow","catch","errorDetail","secondsUntilUnlock","timeUntilUnlockMsg","Math","floor","to","PATH","UNABLE_TO_SIGN_IN","resetFlowUrl","from","SIGN_ON","FORGOT_PASSWORD_USERNAME","REGISTER","CHANGE_PASSWORD","alert","isError","content","isPasswordExpired","React","Component","UsernameValidator","doSubmit","doCancel","preventDefault","handleCancel","children","onSubmit","placeholder","disabled","defaultProps","forgotPasswordUrl","error","validator","Message","messageType","PasswordEditor","newPasswordVerify","isValidatingCredentials","saveAttempted","newPasswordFocused","handleCurrentPasswordUpdate","handleNewPasswordUpdate","handleNewPasswordVerifyUpdate","showTooltipReqs","hideTooltipReqs","changePasswordUrl","reject","Error","errorTarget","getPasswordPolicy","feedbackMessage","requirementsMet","reduce","requirementsTooltip","doPasswordsDiffer","onFocus","onBlur","RecoveryCodeAndPasswordForm","isResending","handleRecoveryCodeUpdate","handleResend","sendRecoveryCodeUrl","newLoginFlow","isRecoveryCodeRequired","RECOVERY_CODE_AND_PASSWORD","recoverPasswordUrl","newFlow","RegistrationForm","passwordVerify","isRegistering","passwordFocused","handleEmailUpdate","handlePasswordVerifyUpdate","handleSignInClick","registrationLink","isReady","maxLength","VerificationCode","isVerifying","handleResendEmail","handleVerificationCodeUpdate","verifyLink","sendVerificationCodeHref","EXPIRED","VERIFY","STATUS_TO_COMPATIBLE_PATHS","Auth","uuidRegex","JSON","parse","decodeURIComponent","test","authState","isFailed","history","replaceState","currentViewPath","some","path","startsWith","exact","render","routeProps","MessageBlock","withRouter","connect","actions","initialState","auth","action","devToolsExtension","__REDUX_DEVTOOLS_EXTENSION__","f","store","compose","applyMiddleware","thunk","freeze","createStore","composeStore","combineReducers","reducer","getElementById"],"mappings":"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","file":"static/js/main.4808b745.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.b15fcf97.png\";","const common = {\r\n  branding: {\r\n    logo: require('./logo.png')\r\n  }\r\n};\r\n\r\nconst stg = {\r\n  AUTH: 'https://auth-staging.pingone.com',\r\n  API: 'https://api-staging.pingone.com/v1/environments'\r\n};\r\n\r\nconst prod = {\r\n  AUTH: 'https://auth.pingone.com',\r\n  API: 'https://api.pingone.com/v1/environments'\r\n};\r\n\r\n// Default to prod if not set\r\nlet config = prod;\r\nif (process.env.REACT_APP_STAGE === 'stg') {\r\n  config = stg;\r\n}\r\n\r\nexport default {\r\n  // Add common config values here\r\n  ...common,\r\n  ...config\r\n};\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport bigInt from \"big-integer\";\r\n\r\nexport const RequiredProperties = {\r\n  MAX_REPEATED_CHARACTERS: \"maxRepeatedCharacters\",\r\n  MIN_UNIQUE_CHARACTERS: \"minUniqueCharacters\",\r\n  LENGTH: \"length\",\r\n  MIN_CHARACTERS: \"minCharacters\",\r\n  MIN_LOWERCASE: \"abcdefghijklmnopqrstuvwxyz\",\r\n  MIN_UPPERCASE: \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n  MIN_NUMERIC: \"0123456789\",\r\n  MIN_SPECIAL: \"~!@#$%^&*()-_=+[]{}|;:,.<>/?\",\r\n  MIN_COMPLEXITY: \"minComplexity\",\r\n};\r\n\r\nconst minCharCheck = (password, charSet, min) => {\r\n  const count = _.sumBy(password, (char) =>\r\n    _.includes(charSet, char) ? 1 : 0\r\n  );\r\n  console.log(charSet);\r\n  console.log(\"count >= min\");\r\n  console.log(count + \" >= \" + min);\r\n  return count >= min;\r\n};\r\n\r\nexport const validate = (passwordPolicy, policyCriterion, password) => {\r\n  switch (policyCriterion) {\r\n    case RequiredProperties.MAX_REPEATED_CHARACTERS: {\r\n      const maxRepeatedCharCount = _.get(passwordPolicy, policyCriterion);\r\n      if (password.length < maxRepeatedCharCount) {\r\n        return false;\r\n      }\r\n\r\n      for (let i = 0; i < password.length; i += 1) {\r\n        const currentChar = password[i];\r\n        let currentCharCount = 1;\r\n        for (let j = i + 1; j < password.length; j += 1) {\r\n          if (password[j] !== currentChar) {\r\n            break;\r\n          }\r\n\r\n          currentCharCount += 1;\r\n\r\n          if (currentCharCount > maxRepeatedCharCount) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n    case RequiredProperties.MIN_UNIQUE_CHARACTERS: {\r\n      const minUniqueCharCount = _.get(passwordPolicy, policyCriterion);\r\n      const count = new Set();\r\n      _.each(password, (char) => {\r\n        count.add(char);\r\n      });\r\n      return count.size >= minUniqueCharCount;\r\n    }\r\n    case RequiredProperties.LENGTH: {\r\n      const lengthValidationRequirements = _.get(\r\n        passwordPolicy,\r\n        policyCriterion\r\n      );\r\n      return (\r\n        password.length >= lengthValidationRequirements.min &&\r\n        password.length <= lengthValidationRequirements.max\r\n      );\r\n    }\r\n    case RequiredProperties.MIN_NUMERIC: {\r\n      return minCharCheck(\r\n        password,\r\n        RequiredProperties.MIN_NUMERIC,\r\n        _.get(passwordPolicy, [\r\n          RequiredProperties.MIN_CHARACTERS,\r\n          RequiredProperties.MIN_NUMERIC,\r\n        ])\r\n      );\r\n    }\r\n    case RequiredProperties.MIN_LOWERCASE: {\r\n      return minCharCheck(\r\n        password,\r\n        RequiredProperties.MIN_LOWERCASE,\r\n        _.get(passwordPolicy, [\r\n          RequiredProperties.MIN_CHARACTERS,\r\n          RequiredProperties.MIN_LOWERCASE,\r\n        ])\r\n      );\r\n    }\r\n    case RequiredProperties.MIN_UPPERCASE: {\r\n      return minCharCheck(\r\n        password,\r\n        RequiredProperties.MIN_UPPERCASE,\r\n        _.get(passwordPolicy, [\r\n          RequiredProperties.MIN_CHARACTERS,\r\n          RequiredProperties.MIN_UPPERCASE,\r\n        ])\r\n      );\r\n    }\r\n    case RequiredProperties.MIN_SPECIAL: {\r\n      return minCharCheck(\r\n        password,\r\n        RequiredProperties.MIN_SPECIAL,\r\n        _.get(passwordPolicy, [\r\n          RequiredProperties.MIN_CHARACTERS,\r\n          RequiredProperties.MIN_SPECIAL,\r\n        ])\r\n      );\r\n    }\r\n    case RequiredProperties.MIN_COMPLEXITY: {\r\n      const guessesPerSecond = 100000000000;\r\n      const secondsInSevenDays = 604800;\r\n      const minComplexity = bigInt(guessesPerSecond).times(secondsInSevenDays);\r\n      if (password.length === 0) {\r\n        return 0;\r\n      }\r\n\r\n      // Determine the search space depth for the password.  If the password\r\n      // contains any characters from outside the four defined character sets\r\n      // (lowercase ASCII letters, uppercase ASCII letters, ASCII digits, and\r\n      // ASCII symbols), then the depth is automatically 256.  Otherwise, the\r\n      // depth is the num of the number of characters in each set contained in the\r\n      // password.\r\n      let hasLowerLetter = false;\r\n      let hasUpperLetter = false;\r\n      let hasDigit = false;\r\n      let hasSymbol = false;\r\n      let hasOther = false;\r\n      _.each(password, (char) => {\r\n        if (char >= \"a\" && char <= \"z\") {\r\n          hasLowerLetter = true;\r\n        } else if (char >= \"A\" && char <= \"Z\") {\r\n          hasUpperLetter = true;\r\n        } else if (char >= \"0\" && char <= \"9\") {\r\n          hasDigit = true;\r\n        } else if (char >= \" \" && char <= \"~\") {\r\n          hasSymbol = true;\r\n        } else {\r\n          hasOther = true;\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      });\r\n\r\n      // Determine the search space depth for the password.  If the password\r\n      // contains any characters from outside the four defined character sets\r\n      // (lowercase ASCII letters, uppercase ASCII letters, ASCII digits, and\r\n      // ASCII symbols), then the depth is automatically 256.  Otherwise, the\r\n      // depth is the num of the number of characters in each set contained in the\r\n      // password.\r\n      let searchSpaceDepth = 0;\r\n      if (hasOther) {\r\n        searchSpaceDepth = 256;\r\n      } else {\r\n        if (hasLowerLetter) {\r\n          searchSpaceDepth += 26;\r\n        }\r\n\r\n        if (hasUpperLetter) {\r\n          searchSpaceDepth += 26;\r\n        }\r\n\r\n        if (hasDigit) {\r\n          searchSpaceDepth += 10;\r\n        }\r\n\r\n        if (hasSymbol) {\r\n          searchSpaceDepth += 33;\r\n        }\r\n      }\r\n\r\n      let searchSpaceSize = bigInt(0);\r\n      for (let i = 1; i <= password.length; i += 1) {\r\n        const guessesForLength = bigInt(searchSpaceDepth).pow(i);\r\n        searchSpaceSize = searchSpaceSize.add(guessesForLength);\r\n      }\r\n\r\n      return searchSpaceSize.compare(minComplexity) > -1; // -1 means searchSpaceSize < minComplexity, 0 means =, 1 means >\r\n    }\r\n    default: {\r\n      return false;\r\n    }\r\n  }\r\n};\r\n\r\nexport const passwordRequirementsValidator = (passwordPolicy, newPassword) => {\r\n  const clientValidatedRequirements = _.filter(\r\n    _.keys(passwordPolicy),\r\n    (policy) =>\r\n      policy === RequiredProperties.MAX_REPEATED_CHARACTERS ||\r\n      policy === RequiredProperties.MIN_UNIQUE_CHARACTERS ||\r\n      policy === RequiredProperties.MIN_COMPLEXITY ||\r\n      policy === RequiredProperties.LENGTH\r\n  );\r\n\r\n  console.log(passwordPolicy);\r\n  // special handling to flatten minChars so each can be validated separately\r\n  const minCharReqs = _.get(passwordPolicy, RequiredProperties.MIN_CHARACTERS);\r\n  _.each(minCharReqs, (key, value) =>\r\n    clientValidatedRequirements.push(`${value}`)\r\n  );\r\n\r\n  console.log(clientValidatedRequirements);\r\n  const errors = _.map(clientValidatedRequirements, (policyName) => ({\r\n    name: policyName,\r\n    isValid: validate(passwordPolicy, policyName, newPassword),\r\n  }));\r\n\r\n  return errors;\r\n};\r\n\r\nexport const getServerValidatedRequirementMessage = (\r\n  failedReq,\r\n  passwordPolicy\r\n) => {\r\n  switch (failedReq) {\r\n    case \"history\": {\r\n      const historyCount = _.get(passwordPolicy, \"history.count\", null);\r\n\r\n      // Fallback if for whatever reason we cannot load history.count\r\n      if (historyCount === null) {\r\n        return \"Password must not be similar to your prevous passwords\";\r\n      }\r\n\r\n      return `Password cannot be the same or similar to your previous ${historyCount} passwords.`;\r\n    }\r\n    case \"excludesProfileData\":\r\n      return \"Password cannot contain information from your user profile.\";\r\n    case \"notSimilarToCurrent\":\r\n      return \"Password cannot be similar to your current password.\";\r\n    case \"excludesCommonlyUsed\":\r\n      return \"Password must not be a commonly used password.\";\r\n    case \"minComplexity\":\r\n      return \"Password does not meet minimum complexity requirements.\";\r\n    default:\r\n      return \"Password does not meet requirements.\";\r\n  }\r\n};\r\n\r\nexport const generateRequirementsTooltip = (\r\n  clientValidatedRequirements,\r\n  flow\r\n) =>\r\n  _.map(clientValidatedRequirements, (policy) => {\r\n    const icon = policy.isValid ? (\r\n      <i className=\"fa fa-check\" style={{ color: \"green\" }}></i>\r\n    ) : (\r\n      <i className=\"fa fa-warning\" style={{ color: \"red\" }}></i>\r\n    );\r\n\r\n    return (\r\n      <div key={policy.name} className=\"requirement\">\r\n        {icon}\r\n        <span className=\"requirement__name\">\r\n          {flow.getPasswordPolicyMessage(policy)}\r\n        </span>\r\n      </div>\r\n    );\r\n  });\r\n\r\nexport const getURLParameter = (paramName) => {\r\n  const urlParts = decomposeUrl(window.location.href);\r\n  return urlParts.queryParams[paramName];\r\n};\r\n\r\nconst decomposeUrl = (url) => {\r\n  if (!url) {\r\n    return {};\r\n  }\r\n\r\n  const a = document.createElement(\"a\");\r\n  a.href = url;\r\n\r\n  return {\r\n    host: a.host,\r\n    pathname: a.pathname,\r\n    search: a.search,\r\n    queryParams: parseQueryParams(a.search),\r\n    hash: a.hash,\r\n  };\r\n};\r\n\r\nconst parseQueryParams = (searchStr) => {\r\n  const str = searchStr.replace(/^\\?/, \"\");\r\n  const params = str.split(\"&\");\r\n\r\n  const returnVal = {};\r\n\r\n  _.forEach(params, (param) => {\r\n    const paramSplit = param.split(\"=\");\r\n    returnVal[paramSplit[0]] = paramSplit[1];\r\n  });\r\n\r\n  return returnVal;\r\n};\r\n","import _ from \"lodash\";\r\n\r\nimport { RequiredProperties } from \"./helpers\";\r\n\r\nexport const STATUS = {\r\n  SUCCESS: \"SUCCESS\",\r\n  UNAUTHORIZED: \"UNAUTHORIZED\",\r\n\r\n  COMPLETED: \"COMPLETED\",\r\n  USERNAME_PASSWORD_REQUIRED: \"USERNAME_PASSWORD_REQUIRED\",\r\n  PASSWORD_REQUIRED: \"PASSWORD_REQUIRED\",\r\n  INVALID_CREDENTIALS: \"INVALID_CREDENTIALS\",\r\n  NO_PASSWORD: \"NO_PASSWORD\",\r\n  PASSWORD_EXPIRED: \"PASSWORD_EXPIRED\",\r\n  PASSWORD_LOCKED_OUT: \"PASSWORD_LOCKED_OUT\",\r\n  MUST_CHANGE_PASSWORD: \"MUST_CHANGE_PASSWORD\",\r\n  PASSWORD_REQUIREMENTS_NOT_MET: \"PASSWORD_REQUIREMENTS_NOT_MET\",\r\n  VERIFICATION_CODE_REQUIRED: \"VERIFICATION_CODE_REQUIRED\",\r\n  RECOVERY_CODE_REQUIRED: \"RECOVERY_CODE_REQUIRED\",\r\n  INVALID_VALUE: \"INVALID_VALUE\",\r\n  UNIQUENESS_VIOLATION: \"UNIQUENESS_VIOLATION\",\r\n  UNKNOWN: \"UNKNOWN\",\r\n  FAILED: \"FAILED\",\r\n};\r\n\r\nexport class Flow {\r\n  constructor({ id, status, _links, _embedded, resumeUrl }) {\r\n    this.id = id;\r\n    this.links = _links;\r\n    this.embedded = _embedded;\r\n    this.status = _.get(STATUS, status, STATUS.UNKNOWN);\r\n    this.resumeUrl = resumeUrl;\r\n  }\r\n\r\n  isPasswordExpired() {\r\n    return _.isEqual(this.status, STATUS.PASSWORD_EXPIRED);\r\n  }\r\n\r\n  isCompleted() {\r\n    return _.isEqual(this.status, STATUS.COMPLETED);\r\n  }\r\n\r\n  isFailed() {\r\n    return _.isEqual(this.status, STATUS.FAILED);\r\n  }\r\n\r\n  isRecoveryCodeRequired() {\r\n    return _.isEqual(this.status, STATUS.RECOVERY_CODE_REQUIRED);\r\n  }\r\n\r\n  getLinks() {\r\n    return this.links;\r\n  }\r\n\r\n  getPasswordPolicy() {\r\n    return this.embedded.passwordPolicy;\r\n  }\r\n\r\n  getUser() {\r\n    return this.embedded.user;\r\n  }\r\n\r\n  getPasswordPolicyMessage(policy) {\r\n    const { passwordPolicy } = this.embedded;\r\n\r\n    if (!passwordPolicy) {\r\n      return {};\r\n    }\r\n\r\n    let requirement;\r\n    if (policy.name === RequiredProperties.MIN_SPECIAL) {\r\n      requirement = _.get(\r\n        _.get(passwordPolicy, \"minCharacters\"),\r\n        RequiredProperties.MIN_SPECIAL\r\n      );\r\n      return _.get(generatePasswordPolicyMessage(requirement), \"minSpecial\");\r\n    } else if (policy.name === RequiredProperties.MIN_LOWERCASE) {\r\n      requirement = _.get(\r\n        _.get(passwordPolicy, \"minCharacters\"),\r\n        RequiredProperties.MIN_LOWERCASE\r\n      );\r\n      return _.get(generatePasswordPolicyMessage(requirement), \"minLower\");\r\n    } else if (policy.name === RequiredProperties.MIN_UPPERCASE) {\r\n      requirement = _.get(\r\n        _.get(passwordPolicy, \"minCharacters\"),\r\n        RequiredProperties.MIN_UPPERCASE\r\n      );\r\n      return _.get(generatePasswordPolicyMessage(requirement), \"minUpper\");\r\n    } else if (policy.name === RequiredProperties.MIN_NUMERIC) {\r\n      requirement = _.get(\r\n        _.get(passwordPolicy, \"minCharacters\"),\r\n        RequiredProperties.MIN_NUMERIC\r\n      );\r\n      return _.get(generatePasswordPolicyMessage(requirement), \"minNumeric\");\r\n    }\r\n\r\n    return _.get(\r\n      generatePasswordPolicyMessage(_.get(passwordPolicy, policy.name)),\r\n      policy.name\r\n    );\r\n  }\r\n}\r\n\r\nexport const generatePasswordPolicyMessage = (value) => {\r\n  if (value) {\r\n    return {\r\n      maxRepeatedCharacters: `No more than ${value} repeated character${\r\n        value > 1 ? \"s\" : \"\"\r\n      }`,\r\n      minUniqueCharacters: `${value} unique character${value > 1 ? \"s\" : \"\"}`,\r\n      length: `${value.min} character${value.min > 1 ? \"s\" : \"\"}`,\r\n      minNumeric: `${value} number`,\r\n      minLower: `${value} lowercase character${value > 1 ? \"s\" : \"\"}`,\r\n      minUpper: `${value} UPPERCASE character${value > 1 ? \"s\" : \"\"}`,\r\n      minSpecial: `${value} special character${value > 1 ? \"s\" : \"\"}`,\r\n      minComplexity: \"Must be a strong password\",\r\n    };\r\n  } else {\r\n    return {};\r\n  }\r\n};\r\n","/**\r\n * PingOne authentication flow and OpenID Connect/OAuth 2 protocol API.\r\n *\r\n * Contains functions that correspond to steps needed to make it through a PingOne authentication flow.\r\n * Each function corresponds with an action the UI needs to take and call function(s) from actions.js\r\n */\r\nimport request from \"superagent\";\r\nimport config from \"../config\";\r\n\r\n/******************************************************************************\r\n *         PingOne Authentication Flow Actions API\r\n ******************************************************************************/\r\n\r\nconst getFlow =  (environmentId, flowId) => {\r\n  let flowUrl = `${getBaseApiUrl(true)}/${environmentId}/flows/${flowId}`;\r\n  return get( flowUrl, true, {'Content-Type': 'application/json'}, true)\r\n}\r\n/**\r\n *  Login user\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n * @param username user name\r\n * @param password user password\r\n */\r\nconst signOn = (apiPath, username, password) => {\r\n  return pingPost(apiPath, 'usernamePassword.check+json', {username, password});\r\n};\r\n\r\n/**\r\n * Recover a users forgotten password.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n * @param username user name\r\n */\r\nconst forgotPassword = (apiPath, username) => {\r\n  return pingPost(apiPath, 'password.forgot+json', {username});\r\n};\r\n\r\n/**\r\n * Send the OTP to the user. The OTP is a randomly generated eight-character alphanumeric string sent to the users email address, and the code is valid for five minutes.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n */\r\nconst sendRecoveryCode = (apiPath) => {\r\n  return pingPost(apiPath, 'password.sendRecoveryCode+json');\r\n};\r\n\r\n/**\r\n * Recover the account and set a new password.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n * @param recoveryCode\r\n * @param newPassword\r\n */\r\nconst recoverUserPassword = (apiPath, recoveryCode,\r\n    newPassword) => {\r\n  return pingPost(apiPath, 'password.recover+json',\r\n      {recoveryCode, newPassword});\r\n};\r\n\r\n/**\r\n * Change (or reset) the users password.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n * @param username user name\r\n * @param currentPassword\r\n * @param newPassword\r\n */\r\nconst changeUserPassword = (apiPath, username, currentPassword,\r\n    newPassword) => {\r\n  return pingPost(apiPath, 'password.reset+json',\r\n      {currentPassword, newPassword});\r\n};\r\n\r\n/**\r\n * Update (or reset) a flow orchestration session.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n */\r\nconst resetFlow = (apiPath) => {\r\n  return pingPost(apiPath, 'session.reset+json', {})\r\n};\r\n\r\n/**\r\n * Send the user a new account verification email.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n */\r\nconst sendVerificationCode = (apiPath) => {\r\n  return pingPost(apiPath, 'user.sendVerificationCode+json');\r\n};\r\n\r\n/**\r\n * Verify the user account to continue the authentication flow.\r\n * The user must click the link in the verification email to verify the account. The request body requires the verificationCode attribute identifying the verification code to check.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n * @param verificationCode\r\n */\r\nconst verifyUser = (apiPath, verificationCode) => {\r\n  return pingPost(apiPath, 'user.verify+json', {verificationCode});\r\n};\r\n\r\n/**\r\n * Register a new user.\r\n * @param apiPath PingOne for Customers authorization and authentication endpoint\r\n * @param username user name\r\n * @param email\r\n * @param password\r\n */\r\nconst registerUser = (apiPath, username, email, password) => {\r\n  return pingPost(apiPath, 'user.register+json', {username, email, password});\r\n};\r\n\r\nconst pingPost = (apiPath, contentType, body = {}) =>\r\n    post(apiPath, `application/vnd.pingidentity.${contentType}`, body);\r\n\r\nconst post = (apiPath, contentType, body = {}) =>\r\n    new Promise((resolved, rejected) =>\r\n        request\r\n        .post(apiPath)\r\n        .withCredentials()\r\n        .send(body)\r\n        .set('Content-Type', contentType)\r\n        .end((err, res) => {\r\n          if (err) {\r\n            rejected(res ? res.body : err);\r\n          } else {\r\n            resolved(res.body);\r\n          }\r\n        }));\r\n\r\nconst get = (apiPath, getBody = false, headers = {},\r\n    withCredentials = false) => {\r\n  return new Promise((resolved, rejected) => {\r\n        let req = request\r\n        .get(apiPath)\r\n        .set(headers);\r\n\r\n        if (withCredentials) {\r\n          req = req.withCredentials();\r\n        }\r\n        req.end((err, res) => {\r\n          if (err) {\r\n            rejected(res ? res.body : err);\r\n          } else {\r\n            resolved(getBody ? res.body : res);\r\n          }\r\n        })\r\n      }\r\n  );\r\n}\r\n\r\n\r\nconst getBaseApiUrl = (useAuthUrl) => {\r\n  return useAuthUrl ?\r\n      config.AUTH : // base API URL for auth things like the flow orchestration service\r\n      config.API; // base API URL for non-auth things\r\n};\r\n\r\nexport default {\r\n  getFlow,\r\n  resetFlow,\r\n\r\n  signOn,\r\n  changeUserPassword,\r\n  forgotPassword,\r\n  sendRecoveryCode,\r\n  recoverUserPassword,\r\n\r\n  registerUser,\r\n  sendVerificationCode,\r\n  verifyUser\r\n}\r\n","import { Flow } from \"../sdk/index\";\r\nimport api from \"./api\";\r\nimport _ from \"lodash\";\r\n\r\nconst types = {\r\n  UPDATE_FLOW: \"UPDATE_FLOW\",\r\n  UNRECOVERABLE_ERROR: \"UNRECOVERABLE_ERROR\",\r\n};\r\n\r\n// Actions Creator\r\n\r\nconst updateFlowAction = (result, isAuthenticated = false, message = null) => ({\r\n  type: types.UPDATE_FLOW,\r\n  payload: {\r\n    result,\r\n    isAuthenticated,\r\n    message,\r\n  },\r\n});\r\n\r\nconst updateFlow = (dispatch) => (\r\n  result = null,\r\n  isAuthenticated = false,\r\n  message = null\r\n) => {\r\n  return dispatch(\r\n    updateFlowAction(\r\n      result ? new Flow(result) : result,\r\n      isAuthenticated,\r\n      message\r\n    )\r\n  );\r\n};\r\n\r\nconst getFlow = (dispatch) => (environmentId, flowId) => {\r\n  return api.getFlow(environmentId, flowId).then((flow) => {\r\n    dispatch(updateFlowAction(new Flow(flow)));\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nconst resetFlow = (dispatch) => (apiPath) => {\r\n  return api.resetFlow(apiPath).then((flow) => {\r\n    dispatch(updateFlowAction(new Flow(flow)));\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nconst signOn = (dispatch) => (apiPath, username, password) => {\r\n  return api.signOn(apiPath, username, password).then((flow) => {\r\n    dispatch(updateFlowAction(new Flow(flow), true));\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nconst forgotPassword = (dispatch) => (apiPath, username) => {\r\n  return api.forgotPassword(apiPath, username).then((flow) => {\r\n    dispatch(updateFlowAction(new Flow(flow)));\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nconst sendRecoveryCode = (dispatch) => (apiPath) => {\r\n  return api.sendRecoveryCode(apiPath).then((flow) => {\r\n    dispatch(updateFlowAction(new Flow(flow)));\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nconst recoverUserPassword = (dispatch) => (\r\n  apiPath,\r\n  recoveryCode,\r\n  newPassword\r\n) => {\r\n  return api\r\n    .recoverUserPassword(apiPath, recoveryCode, newPassword)\r\n    .then((flow) => {\r\n      dispatch(\r\n        updateFlowAction(\r\n          new Flow(flow),\r\n          false,\r\n          \"You successfully recovered your password, \" +\r\n            _.get(flow, \"_embedded.user.username\", \"\")\r\n        )\r\n      );\r\n      return Promise.resolve(flow);\r\n    });\r\n};\r\n\r\nconst changeUserPassword = (dispatch) => (\r\n  apiPath,\r\n  username,\r\n  currentPassword,\r\n  newPassword\r\n) => {\r\n  console.log(\"newP\");\r\n  console.log(newPassword);\r\n  return api\r\n    .changeUserPassword(apiPath, username, currentPassword, newPassword)\r\n    .then((flow) => {\r\n      dispatch(updateFlowAction(new Flow(flow)));\r\n      return Promise.resolve(flow);\r\n    });\r\n};\r\n\r\nconst sendVerificationCode = (dispatch) => (apiPath) => {\r\n  return api.sendVerificationCode(apiPath).then((flow) => {\r\n    dispatch(updateFlowAction(new Flow(flow)));\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nconst verifyUser = (dispatch) => (apiPath, verificationCode) => {\r\n  return api.verifyUser(apiPath, verificationCode).then((flow) => {\r\n    dispatch(\r\n      updateFlowAction(\r\n        new Flow(flow),\r\n        false,\r\n        \"Congratulations, \" +\r\n          _.get(flow, \"_embedded.user.username\") +\r\n          \"! Youve created a Ping Sample Application account\"\r\n      )\r\n    );\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nconst registerUser = (dispatch) => (apiPath, username, email, password) => {\r\n  return api.registerUser(apiPath, username, email, password).then((flow) => {\r\n    dispatch(updateFlowAction(new Flow(flow)));\r\n    return Promise.resolve(flow);\r\n  });\r\n};\r\n\r\nexport default {\r\n  types,\r\n\r\n  bind: (dispatch) => ({\r\n    signOn: signOn(dispatch),\r\n    changeUserPassword: changeUserPassword(dispatch),\r\n    forgotPassword: forgotPassword(dispatch),\r\n    sendRecoveryCode: sendRecoveryCode(dispatch),\r\n    recoverUserPassword: recoverUserPassword(dispatch),\r\n    sendVerificationCode: sendVerificationCode(dispatch),\r\n    verifyUser: verifyUser(dispatch),\r\n    registerUser: registerUser(dispatch),\r\n\r\n    getFlow: getFlow(dispatch),\r\n    updateFlow: updateFlow(dispatch),\r\n    resetFlow: resetFlow(dispatch),\r\n  }),\r\n};\r\n","import React, { useState } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { DropzoneArea } from \"material-ui-dropzone\";\r\nimport { ColorExtractor } from \"react-color-extractor\";\r\nimport ReactAvatarEditor from \"react-avatar-editor\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\n\r\nexport default function DragNDrop({ ...props }) {\r\n  const [file, setFile] = useState(0);\r\n  const [scale, setScale] = useState(120);\r\n  const [colors, setColors] = useState(0);\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      height: \"100%\",\r\n    },\r\n    dropzoneArea: {\r\n      height: \"100%\",\r\n      maxHeight: \"100%\",\r\n      width: \"100%\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n    },\r\n    dropzoneAreaText: {\r\n      color: \"#000000\",\r\n      fontSize: \"2rem\",\r\n    },\r\n    image: {\r\n      backgroundImage: file,\r\n      backgroundRepeat: \"no-repeat\",\r\n      backgroundColor:\r\n        theme.palette.type === \"light\"\r\n          ? theme.palette.grey[50]\r\n          : theme.palette.grey[900],\r\n      backgroundSize: \"cover\",\r\n      backgroundPosition: \"center\",\r\n      width: \"100%\",\r\n    },\r\n  }));\r\n\r\n  const classes = useStyles();\r\n\r\n  const onDrop = (acceptedFiles) => {\r\n    // Do something with the files\r\n    let newFile = { ...file };\r\n    let uploadedFile = acceptedFiles[acceptedFiles.length - 1];\r\n    if (uploadedFile) {\r\n      console.log(uploadedFile);\r\n      newFile = URL.createObjectURL(uploadedFile);\r\n      setFile(newFile);\r\n    }\r\n  };\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setScale(newValue);\r\n  };\r\n\r\n  const imgOrDropzone = () => {\r\n    if (file) {\r\n      return (\r\n        <Grid item container display=\"flex\" style={{ height: \"100%\" }}>\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            style={{\r\n              width: \"100%\",\r\n              maxWidth: \"100%\",\r\n              height: \"95%\",\r\n              maxHeight: \"95%\",\r\n            }}\r\n          >\r\n            <ReactAvatarEditor\r\n              classes={classes.image}\r\n              image={file}\r\n              border={0}\r\n              color={[255, 255, 255, 0.6]} // RGBA\r\n              scale={scale / 100}\r\n              rotate={0}\r\n              style={{\r\n                minHeight: \"100%\",\r\n                minWidth: \"100%\",\r\n                overflow: \"hidden\",\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} style={{ height: \"10%\", maxHeight: \"10%\" }}>\r\n            <Fab style={{ width: \"100%\" }}>\r\n              <Slider\r\n                value={scale}\r\n                onChange={handleChange}\r\n                min={10}\r\n                max={300}\r\n                aria-labelledby=\"continuous-slider\"\r\n              />\r\n            </Fab>\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n    return (\r\n      <DropzoneArea\r\n        dropzoneClass={classes.dropzoneArea}\r\n        dropzoneParagraphClass={\"color: #000000, fontSize: 2rem\"}\r\n        showPreviews={false}\r\n        showPreviewsInDropzone={false}\r\n        acceptedFiles={[\"image/*\"]}\r\n        filesLimit={1}\r\n        maxFileSize={50000000} // ~5GB\r\n        onChange={onDrop}\r\n        dropzoneText=\"Upload a Logo Image Here. Drag Image to Rearrange.\"\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Container className={classes.root} maxWidth={false} disableGutters>\r\n      <Grid\r\n        container\r\n        display=\"flex\"\r\n        wrap=\"wrap\"\r\n        spacing={0}\r\n        justify=\"flex-start\"\r\n        alignItems=\"stretch\"\r\n        style={{ height: \"100%\", maxHeight: \"100%\" }}\r\n      >\r\n        <Grid\r\n          item\r\n          xs={12}\r\n          style={{\r\n            overflow: \"hidden\",\r\n            position: \"relative\",\r\n          }}\r\n        >\r\n          {imgOrDropzone()}\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nexport default function EmailInput(props) {\r\n  return (\r\n    <TextField\r\n      variant=\"outlined\"\r\n      margin=\"normal\"\r\n      required\r\n      fullWidth\r\n      id=\"username\"\r\n      label=\"Username\"\r\n      name=\"username\"\r\n      autoComplete=\"email\"\r\n      autoFocus\r\n      onChange={props.handleUsernameUpdate}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nexport default function EmailInput(props) {\r\n  return (\r\n    <TextField\r\n      variant=\"outlined\"\r\n      margin=\"normal\"\r\n      required\r\n      fullWidth\r\n      name=\"password\"\r\n      label=\"Password\"\r\n      type=\"password\"\r\n      id=\"password\"\r\n      autoComplete=\"current-password\"\r\n      onChange={props.handlePasswordUpdate}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\n\r\nexport default function ForgotPassword(props) {\r\n  return (\r\n    <Grid item xs>\r\n      <Link href=\"#\" variant=\"body2\" onClick={props.handleForgotPassword}>\r\n        Forgot password?\r\n      </Link>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\n\r\nexport default function NoAccount(props) {\r\n  return (\r\n    <Grid item>\r\n      <Link href=\"#\" variant=\"body2\" onClick={props.handleRegister}>\r\n        {\"Don't have an account? Sign Up\"}\r\n      </Link>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Link from \"@material-ui/core/Link\";\r\n\r\nexport default function EmailInput(props) {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright  \"}\r\n      <Link color=\"inherit\" href=\"https://developer.pingidentity.com/\">\r\n        Ping Identity\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DragNDrop from \"./DragNDrop\";\r\nimport EmailInput from \"./InputForm/EmailInput\";\r\nimport PasswordInput from \"./InputForm/PasswordInput\";\r\nimport ForgotPassword from \"./InputForm/ForgotPassword\";\r\nimport NoAccount from \"./InputForm/NoAccount\";\r\nimport Copyright from \"./InputForm/Copyright\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100vh\",\r\n  },\r\n  image: {\r\n    backgroundImage: \"url(https://source.unsplash.com/random)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundColor:\r\n      theme.palette.type === \"light\"\r\n        ? theme.palette.grey[50]\r\n        : theme.palette.grey[900],\r\n    backgroundSize: \"cover\",\r\n    backgroundPosition: \"center\",\r\n  },\r\n  paper: {\r\n    margin: theme.spacing(8, 4),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function SignInPage({\r\n  handleUsernameUpdate,\r\n  handlePasswordUpdate,\r\n  handleSubmit,\r\n  handleForgotPassword,\r\n  handlePasswordReset,\r\n  handleRegister,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid container component=\"main\" className={classes.root}>\r\n      <CssBaseline />\r\n      <Grid\r\n        item\r\n        xs={false}\r\n        sm={4}\r\n        md={6}\r\n        lg={8}\r\n        xl={9}\r\n        style={{ maxHeight: \"100%\" }}\r\n      >\r\n        <DragNDrop />\r\n      </Grid>\r\n\r\n      <Grid\r\n        item\r\n        xs={12}\r\n        sm={8}\r\n        md={6}\r\n        lg={4}\r\n        xl={3}\r\n        component={Paper}\r\n        elevation={6}\r\n        square\r\n        style={{ maxHeight: \"100%\" }}\r\n      >\r\n        <div className={classes.paper}>\r\n          <Avatar className={classes.avatar}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <form className={classes.form} noValidate>\r\n            <EmailInput handleUsernameUpdate={handleUsernameUpdate} />\r\n            <PasswordInput handlePasswordUpdate={handlePasswordUpdate} />\r\n            <FormControlLabel\r\n              control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n              label=\"Remember me\"\r\n            />\r\n            <Button\r\n              type=\"button\"\r\n              data-id=\"user-credentials-submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.submit}\r\n              onClick={handleSubmit}\r\n            >\r\n              Sign In\r\n            </Button>\r\n            <Grid container>\r\n              <ForgotPassword handleForgotPassword={handleForgotPassword} />\r\n              <NoAccount handleRegister={handleRegister} />\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              container\r\n              maxwidth=\"false\"\r\n              direction=\"column\"\r\n              justify=\"flex-end\"\r\n              style={{ height: \"30vh\", maxHeight: \"30vh\" }}\r\n            >\r\n              <Grid item zeroMinWidth>\r\n                <Copyright />\r\n              </Grid>\r\n            </Grid>\r\n          </form>\r\n        </div>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Flow, STATUS } from \"../sdk\";\r\nimport { PATH } from \"./auth\";\r\nimport _ from \"lodash\";\r\nimport SignInPage from \"./SignInPage\";\r\nimport { Container } from \"@material-ui/core\";\r\n\r\nclass UserLogin extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      isSubmitting: false,\r\n      redirect: null,\r\n    };\r\n\r\n    this.handleUsernameUpdate = this.handleUsernameUpdate.bind(this);\r\n    this.handlePasswordUpdate = this.handlePasswordUpdate.bind(this);\r\n    this.handleForgotPassword = this.handleForgotPassword.bind(this);\r\n    this.handleRegister = this.handleRegister.bind(this);\r\n    this.handleResetFlow = this.handleResetFlow.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleUsernameUpdate(event) {\r\n    this.setState({ username: event.target.value });\r\n  }\r\n\r\n  handlePasswordUpdate(event) {\r\n    this.setState({ password: event.target.value });\r\n  }\r\n\r\n  handleSubmit() {\r\n    const { flow, authActions } = this.props;\r\n\r\n    this.setState({\r\n      isSubmitting: true,\r\n      spinnerMessage: \"Signing you on...\",\r\n      errorMessage: \"\",\r\n    });\r\n\r\n    console.log(\"flow\");\r\n    console.log(flow);\r\n\r\n    if (flow.isCompleted()) {\r\n      // Redirect to the resume endpoint in case of password recovery or new user registration process completion\r\n      window.location.assign(flow.resumeUrl);\r\n      return;\r\n    }\r\n\r\n    const validatePasswordUrl = _.get(\r\n      flow.getLinks(),\r\n      [\"usernamePassword.check\", \"href\"],\r\n      null\r\n    );\r\n    if (!validatePasswordUrl) {\r\n      this.setState({\r\n        errorMessage:\r\n          \"An unexpected error has occurred. There is no user validation link in the flow.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    return authActions\r\n      .signOn(validatePasswordUrl, this.state.username, this.state.password)\r\n      .then((newflow) => {\r\n        console.log(\"newflow then\");\r\n        this.setState({\r\n          isSubmitting: false,\r\n        });\r\n        console.log(\"newflow before promise\");\r\n        return Promise.resolve(newflow);\r\n      })\r\n      .catch((err) => {\r\n        const errorDetail = _.get(err, \"details[0].code\", null);\r\n        if (_.isEqual(errorDetail, STATUS.INVALID_CREDENTIALS)) {\r\n          this.setState({\r\n            errorMessage: \"Incorrect username or password. Please try again.\",\r\n            isSubmitting: false,\r\n          });\r\n        } else if (_.isEqual(errorDetail, STATUS.PASSWORD_LOCKED_OUT)) {\r\n          const secondsUntilUnlock = _.get(\r\n            err,\r\n            \"details[0].innerError.secondsUntilUnlock\",\r\n            null\r\n          );\r\n          const timeUntilUnlockMsg =\r\n            secondsUntilUnlock > 60\r\n              ? `${Math.floor(secondsUntilUnlock / 60)} minutes`\r\n              : `${secondsUntilUnlock} seconds`;\r\n          const errorMessage = `Too many unsuccessful sign-on attempts. Your account will unlock in ${timeUntilUnlockMsg}.`;\r\n          this.setState({\r\n            redirect: (\r\n              <Redirect\r\n                to={{\r\n                  pathname: PATH.UNABLE_TO_SIGN_IN,\r\n                  state: { errorMessage },\r\n                }}\r\n              />\r\n            ),\r\n            isSubmitting: false,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            errorMessage: \"An unexpected error has occurred.\",\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  handleResetFlow() {\r\n    const { flow, authActions } = this.props;\r\n\r\n    const resetFlowUrl = _.get(\r\n      flow.getLinks(),\r\n      [\"session.reset\", \"href\"],\r\n      null\r\n    );\r\n    if (!resetFlowUrl) {\r\n      this.setState({\r\n        errorMessage:\r\n          \"An unexpected error has occurred. There is no session reset link in the flow.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    return authActions.resetFlow(resetFlowUrl).catch((err) => {\r\n      this.setState({\r\n        errorMessage: `An unexpected error has occurred. ${err}`,\r\n      });\r\n    });\r\n  }\r\n\r\n  handleForgotPassword() {\r\n    this.setState({\r\n      redirect: (\r\n        <Redirect from={PATH.SIGN_ON} to={PATH.FORGOT_PASSWORD_USERNAME} />\r\n      ),\r\n    });\r\n  }\r\n\r\n  handleRegister() {\r\n    this.setState({\r\n      redirect: <Redirect from={PATH.SIGN_ON} to={PATH.REGISTER} />,\r\n    });\r\n  }\r\n\r\n  handlePasswordReset() {\r\n    this.setState({\r\n      redirect: <Redirect from={PATH.SIGN_ON} to={PATH.CHANGE_PASSWORD} />,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { username, password, redirect, errorMessage } = this.state;\r\n    const { flow, message } = this.props;\r\n\r\n    const alert =\r\n      (errorMessage || message) &&\r\n      (errorMessage || (message && message.isError) ? (\r\n        <div className=\"alert alert-danger\">\r\n          {errorMessage ? errorMessage : message.content}\r\n        </div>\r\n      ) : (\r\n        <div className=\"alert alert-success\">{message.content}</div>\r\n      ));\r\n\r\n    if (flow) {\r\n      // Rendering a Redirect will cause switch to the corresponding Route's content\r\n      if (flow.isPasswordExpired()) {\r\n        return (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/expired\",\r\n              state: { username, currentPassword: password },\r\n            }}\r\n          />\r\n        );\r\n      }\r\n\r\n      const forgotPasswordUrl = _.get(\r\n        flow.getLinks(),\r\n        [\"password.forgot\", \"href\"],\r\n        null\r\n      );\r\n      const forgotPasswordAnchor = forgotPasswordUrl && (\r\n        <div className=\"input-field\">\r\n          <a\r\n            href=\"#\"\r\n            data-id=\"recovery-button\"\r\n            onClick={this.handleForgotPassword}\r\n          >\r\n            Forgot Password\r\n          </a>\r\n        </div>\r\n      );\r\n\r\n      const userRegistrationLink = _.get(\r\n        flow.getLinks(),\r\n        [\"user.register\"],\r\n        null\r\n      );\r\n      const registerUserAnchor = userRegistrationLink && (\r\n        <div className=\"input-field\">\r\n          No account?{\" \"}\r\n          <a data-id=\"register-button\" href=\"#\" onClick={this.handleRegister}>\r\n            Register now!\r\n          </a>\r\n        </div>\r\n      );\r\n\r\n      const passwordResetLink = _.get(\r\n        flow.getLinks(),\r\n        [\"password.reset\"],\r\n        null\r\n      );\r\n      const passwordResetAnchor = passwordResetLink && (\r\n        <div className=\"input-field\">\r\n          <a\r\n            data-id=\"reset-password-button\"\r\n            href=\"#\"\r\n            onClick={this.handlePasswordReset}\r\n          >\r\n            Reset password\r\n          </a>\r\n        </div>\r\n      );\r\n\r\n      const resetFlowLink = _.get(flow.getLinks(), [\"session.reset\"], null);\r\n      const resetFlowAnchor = resetFlowLink && (\r\n        <div className=\"input-field\">\r\n          <a\r\n            data-id=\"session-reset-button\"\r\n            href=\"#\"\r\n            onClick={this.handleResetFlow}\r\n          >\r\n            Switch Accounts\r\n          </a>\r\n        </div>\r\n      );\r\n\r\n      return (\r\n        <Container display=\"flex\" maxWidth={false} disableGutters>\r\n          {redirect}\r\n          {alert}\r\n\r\n          <SignInPage\r\n            handleUsernameUpdate={this.handleUsernameUpdate}\r\n            handlePasswordUpdate={this.handlePasswordUpdate}\r\n            handleForgotPassword={this.handleForgotPassword}\r\n            handleSubmit={this.handleSubmit}\r\n            handlePasswordReset={this.handlePasswordReset}\r\n            handleRegister={this.handleRegister}\r\n          />\r\n        </Container>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"container\">\r\n          {redirect}\r\n          <div>Waiting for the flow ...</div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nUserLogin.propTypes = {\r\n  authActions: PropTypes.shape({\r\n    signOn: PropTypes.func.isRequired,\r\n    forgotPassword: PropTypes.func.isRequired,\r\n    resetFlow: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n  flow: PropTypes.instanceOf(Flow).isRequired,\r\n};\r\n\r\nexport default UserLogin;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass UsernameValidator extends React.Component {\r\n  constructor(props) {\r\n    super();\r\n    this.state = {\r\n      username: props.username,\r\n    };\r\n\r\n    this.handleUsernameUpdate = this.handleUsernameUpdate.bind(this);\r\n    this.doSubmit = this.doSubmit.bind(this);\r\n    this.doCancel = this.doCancel.bind(this);\r\n  }\r\n\r\n  handleUsernameUpdate(event) {\r\n    this.setState({username: event.target.value});\r\n  }\r\n\r\n  doSubmit(event) {\r\n    event.preventDefault();\r\n    const {username} = this.state;\r\n    this.props.handleSubmit(username);\r\n  }\r\n\r\n  doCancel(event) {\r\n    event.preventDefault();\r\n    this.props.handleCancel();\r\n  }\r\n\r\n  render() {\r\n    const {username} = this.state;\r\n    const {children} = this.props;\r\n\r\n    return (\r\n        <div>\r\n          {children}\r\n          <form className=\"form\" onSubmit={this.doSubmit}>\r\n            <div className=\"input-field\">\r\n              <label>Username</label>\r\n              <input\r\n                  type=\"text\"\r\n                  className=\"text-input input-field\"\r\n                  id=\"username\"\r\n                  name=\"username\"\r\n                  placeholder=\"Username\"\r\n                  value={username}\r\n                  onChange={this.handleUsernameUpdate}\r\n                  autoFocus\r\n              />\r\n            </div>\r\n            <div className=\"input-field\">\r\n              <button\r\n                  className=\"button\"\r\n                  data-id=\"submit-btn\"\r\n                  disabled={!username}\r\n                  type=\"submit\"\r\n              >\r\n                Submit\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"input-field\">\r\n              <button\r\n                  className=\"button\"\r\n                  data-id=\"cancel-btn\"\r\n                  onClick={this.doCancel}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nUsernameValidator.propTypes = {\r\n  username: PropTypes.string,\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  handleCancel: PropTypes.func.isRequired,\r\n  children: PropTypes.node,\r\n};\r\n\r\nUsernameValidator.defaultProps = {\r\n  username: '',\r\n  children: null,\r\n};\r\n\r\nexport default UsernameValidator;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router';\r\nimport UsernameValidator from './usernameValidator';\r\nimport {PATH} from './auth';\r\nimport _ from \"lodash\";\r\nimport {Flow} from \"../sdk\";\r\n\r\nclass ForgotPassword extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isSubmitting: false,\r\n      redirect: null\r\n    };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n  }\r\n\r\n  handleSubmit(username) {\r\n    const {\r\n      flow,\r\n      authActions\r\n    } = this.props;\r\n\r\n    this.setState({\r\n      isSubmitting: true,\r\n      spinnerMessage: 'Processing password recovery request...'\r\n    });\r\n\r\n    const forgotPasswordUrl = _.get(flow.getLinks(), ['password.forgot', 'href'], null);\r\n    if (!forgotPasswordUrl) {\r\n      this.setState({\r\n        errorMessage: 'There is no forgot password link in the flow. Your password policy may have disabled password recovery. Please check your application configuration in PingOne for Customers Admin Console. ',\r\n      });\r\n      return;\r\n    }\r\n\r\n    return authActions.forgotPassword(forgotPasswordUrl, username)\r\n    .catch(error => {\r\n      if (_.isEqual(_.get(error, 'code', null), 'NOT_FOUND')) {\r\n        this.setState({\r\n          isSubmitting: false,\r\n          errorMessage: 'Such user name could not be found. Please try again.'\r\n        });\r\n      } else {\r\n        this.setState({\r\n          errorMessage: 'An unexpected error has occurred while processing password recovery request.',\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleCancel() {\r\n    this.setState({\r\n      redirect: (\r\n          <Redirect from={PATH.FORGOT_PASSWORD_USERNAME} to={PATH.SIGN_ON}/>),\r\n      isSubmitting: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      isSubmitting,\r\n      spinnerMessage,\r\n      errorMessage,\r\n      redirect,\r\n      username,\r\n    } = this.state;\r\n    const {message} = this.props;\r\n\r\n    const alert = (errorMessage || message) && (\r\n        (errorMessage || (message && message.isError)) ? (\r\n                <div className=\"alert alert-danger\">{errorMessage ? errorMessage\r\n                    : message.content}</div>) :\r\n            <div className=\"alert alert-info\">{message.content}</div>\r\n    );\r\n\r\n    const validator = (\r\n        <UsernameValidator\r\n            username={username}\r\n            handleSubmit={this.handleSubmit}\r\n            handleCancel={this.handleCancel}\r\n        >\r\n          {alert}\r\n        </UsernameValidator>\r\n    );\r\n\r\n    return isSubmitting ?\r\n        <div className=\"alert alert-info\">\r\n          {spinnerMessage}\r\n          <span className=\"loader\"></span>\r\n        </div> : (\r\n            <div>\r\n              {redirect}\r\n              {validator}\r\n            </div>\r\n        );\r\n  }\r\n}\r\n\r\nForgotPassword.propTypes = {\r\n  flow: PropTypes.instanceOf(Flow).isRequired,\r\n  authActions: PropTypes.shape({\r\n    forgotPassword: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default ForgotPassword;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Message = ({ messageType, message }) => {\r\n  return (\r\n    <div>\r\n      <div className={(messageType === \"error\" ? 'alert-danger' : 'alert-success' ) + ' alert'}>{message}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nMessage.propTypes = {\r\n  messageType: PropTypes.string.isRequired,\r\n  message: PropTypes.string.isRequired\r\n};\r\n\r\nexport default Message;\r\n","import _ from \"lodash\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Redirect } from \"react-router\";\r\nimport { PATH } from \"./auth\";\r\nimport { Flow, STATUS } from \"../sdk/index\";\r\nimport {\r\n  passwordRequirementsValidator,\r\n  getServerValidatedRequirementMessage,\r\n  generateRequirementsTooltip,\r\n} from \"../sdk/helpers\";\r\n\r\nclass PasswordEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentPassword: \"\",\r\n      newPassword: \"\",\r\n      newPasswordVerify: \"\",\r\n      errorMessage: \"\",\r\n      isValidatingCredentials: false,\r\n      saveAttempted: false,\r\n      newPasswordFocused: false,\r\n      redirect: null,\r\n    };\r\n\r\n    this.handleCurrentPasswordUpdate = this.handleCurrentPasswordUpdate.bind(\r\n      this\r\n    );\r\n    this.handleNewPasswordUpdate = this.handleNewPasswordUpdate.bind(this);\r\n    this.handleNewPasswordVerifyUpdate = this.handleNewPasswordVerifyUpdate.bind(\r\n      this\r\n    );\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showTooltipReqs = this.showTooltipReqs.bind(this);\r\n    this.hideTooltipReqs = this.hideTooltipReqs.bind(this);\r\n  }\r\n\r\n  handleCurrentPasswordUpdate(event) {\r\n    this.setState({ currentPassword: event.target.value });\r\n  }\r\n\r\n  handleNewPasswordUpdate(event) {\r\n    this.setState({\r\n      newPassword: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleNewPasswordVerifyUpdate(event) {\r\n    this.setState({ newPasswordVerify: event.target.value });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const { currentPassword, newPasswordVerify, newPassword } = this.state;\r\n    const { flow, authActions } = this.props;\r\n\r\n    const changePasswordUrl = _.get(\r\n      flow.getLinks(),\r\n      [\"password.reset\", \"href\"],\r\n      null\r\n    );\r\n    if (!changePasswordUrl) {\r\n      this.setState({\r\n        errorMessage:\r\n          \"An unexpected error has occurred. There is no password reset link in the flow.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      saveAttempted: true,\r\n    });\r\n\r\n    if (newPasswordVerify !== newPassword) {\r\n      // Should never hit this but it doesn't hurt anything to keep it here\r\n      const errorMessage = \"New passwords dont match. Please try again.\";\r\n      this.setState({ errorMessage });\r\n      return Promise.reject(new Error(errorMessage));\r\n    }\r\n\r\n    //  Initiate an action to change (or reset) the users password.\r\n    return new Promise((resolved) =>\r\n      this.setState({ isValidatingCredentials: true }, () => resolved())\r\n    )\r\n      .then(() => {\r\n        authActions.changeUserPassword(\r\n          changePasswordUrl,\r\n          \"user\",\r\n          currentPassword,\r\n          newPassword\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        const errorDetail = _.get(err, \"details[0].code\", null);\r\n\r\n        if (_.isEqual(errorDetail, STATUS.INVALID_VALUE)) {\r\n          const errorTarget = _.get(err, \"details[0].target\", null);\r\n\r\n          if (_.isEqual(errorTarget, \"currentPassword\")) {\r\n            this.setState({\r\n              currentPassword: \"\",\r\n              newPassword: \"\",\r\n              newPasswordVerify: \"\",\r\n              errorMessage: \"Incorrect current password. Please try again.\",\r\n            });\r\n          } else if (_.isEqual(errorTarget, \"newPassword\")) {\r\n            const unsatisfiedServerRequirements = _.get(\r\n              err,\r\n              \"details[0].innerError.unsatisfiedRequirements\",\r\n              []\r\n            );\r\n\r\n            // if there are multiple server validation fails, show just one\r\n            const failedReq = unsatisfiedServerRequirements[0];\r\n\r\n            this.setState({\r\n              currentPassword: \"\",\r\n              newPassword: \"\",\r\n              newPasswordVerify: \"\",\r\n              errorMessage: getServerValidatedRequirementMessage(\r\n                failedReq,\r\n                flow.getPasswordPolicy()\r\n              ),\r\n            });\r\n          } else {\r\n            // Edge case where the error detail is INVALID_VALUE, but it's not a value we expect. Should never happen unless an API change happens without updating the UI.\r\n            this.setState({\r\n              errorMessage: \"An unexpected error has occurred.\",\r\n            });\r\n          }\r\n        } else if (_.isEqual(errorDetail, STATUS.PASSWORD_LOCKED_OUT)) {\r\n          this.setState({\r\n            redirect: (\r\n              <Redirect\r\n                from={PATH.CHANGE_PASSWORD}\r\n                to={{\r\n                  pathname: PATH.UNABLE_TO_SIGN_IN,\r\n                  state: {\r\n                    errorMessage:\r\n                      \"Too many unsuccessful sign-on attempts. Account is now locked.\",\r\n                  },\r\n                }}\r\n              />\r\n            ),\r\n          });\r\n        } else {\r\n          // Edge case where the error detail not one of the expected values. Should never happen unless an API change happens without updating the UI.\r\n          this.setState({\r\n            errorMessage: \"An unexpected error has occurred.\",\r\n          });\r\n        }\r\n\r\n        return Promise.resolve(err);\r\n      })\r\n      .then(() => this.setState({ isValidatingCredentials: false }));\r\n  }\r\n\r\n  showTooltipReqs() {\r\n    this.setState({\r\n      newPasswordFocused: true,\r\n    });\r\n  }\r\n\r\n  hideTooltipReqs() {\r\n    this.setState({\r\n      newPasswordFocused: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      currentPassword,\r\n      newPassword,\r\n      newPasswordVerify,\r\n      errorMessage,\r\n      isValidatingCredentials,\r\n      redirect,\r\n      saveAttempted,\r\n      newPasswordFocused,\r\n    } = this.state;\r\n\r\n    const { flow, feedbackMessage, message } = this.props;\r\n\r\n    const clientValidatedRequirements = passwordRequirementsValidator(\r\n      flow.getPasswordPolicy(),\r\n      newPassword\r\n    );\r\n\r\n    const requirementsMet =\r\n      !!newPassword &&\r\n      _.reduce(\r\n        clientValidatedRequirements,\r\n        (result, req) => result && req.isValid,\r\n        true\r\n      );\r\n    const requirementsTooltip = generateRequirementsTooltip(\r\n      clientValidatedRequirements,\r\n      flow\r\n    );\r\n\r\n    const alert =\r\n      (errorMessage || message) &&\r\n      (errorMessage || (message && message.isError) ? (\r\n        <div className=\"alert alert-danger\">\r\n          {errorMessage ? errorMessage : message.content}\r\n        </div>\r\n      ) : (\r\n        <div className=\"alert alert-success\">{message.content}</div>\r\n      ));\r\n\r\n    const doPasswordsDiffer =\r\n      newPassword &&\r\n      newPasswordVerify &&\r\n      !_.isEqual(newPassword, newPasswordVerify);\r\n\r\n    return isValidatingCredentials ? (\r\n      <div className=\"alert alert-info\">\r\n        Processing changing password request...\r\n        <span className=\"loader\"></span>\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        {redirect}\r\n        <h1 className=\"heading\">Change Password</h1>\r\n        <div className=\"alert alert-info\">{feedbackMessage}</div>\r\n        {alert}\r\n        <form className=\"form\" onSubmit={this.handleSubmit}>\r\n          <div className=\"input-field\">\r\n            <label>Current Password</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"text-input\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Current Password\"\r\n              value={currentPassword}\r\n              onChange={this.handleCurrentPasswordUpdate}\r\n            />\r\n          </div>\r\n          <div\r\n            className={\r\n              !!newPassword && !requirementsMet && !newPasswordFocused\r\n                ? \" input-field input-invalid\"\r\n                : \" input-field input-valid\"\r\n            }\r\n          >\r\n            <label>New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"text-input\"\r\n              id=\"new\"\r\n              name=\"new\"\r\n              placeholder=\"New Password\"\r\n              value={newPassword}\r\n              onChange={this.handleNewPasswordUpdate}\r\n              onFocus={this.showTooltipReqs}\r\n              onBlur={this.hideTooltipReqs}\r\n              autoFocus={saveAttempted}\r\n            />\r\n            {clientValidatedRequirements.length > 0 &&\r\n              newPasswordFocused &&\r\n              !requirementsMet && (\r\n                <div className=\"tooltip show\">\r\n                  <h4 className=\"heading\">Minimum Password Requirements:</h4>\r\n                  <div className=\"requirements\">{requirementsTooltip}</div>\r\n                </div>\r\n              )}\r\n          </div>\r\n          <div\r\n            className={\r\n              !!newPassword && !doPasswordsDiffer\r\n                ? \" input-field input-valid\"\r\n                : \" input-field input-invalid\"\r\n            }\r\n          >\r\n            <label>Verify New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"text-input\"\r\n              id=\"verify\"\r\n              name=\"verify\"\r\n              placeholder=\"Verify New Password\"\r\n              value={newPasswordVerify}\r\n              onChange={this.handleNewPasswordVerifyUpdate}\r\n            />\r\n            {doPasswordsDiffer && (\r\n              <div className=\"tooltip show\">\r\n                <i className=\"fa fa-warning\" style={{ color: \"red\" }}></i>\r\n                <span className=\"requirement__name\">\r\n                  Passwords dont match. Please try again.\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {console.log(!currentPassword)}\r\n          {console.log(!newPassword)}\r\n          {console.log(!newPasswordVerify)}\r\n          {console.log(doPasswordsDiffer)}\r\n          {console.log(!requirementsMet)}\r\n          {console.log()}\r\n          {console.log(newPassword)}\r\n          {console.log(newPasswordVerify)}\r\n          {console.log()}\r\n          <button\r\n            className=\"button\"\r\n            disabled={\r\n              !currentPassword ||\r\n              !newPassword ||\r\n              !newPasswordVerify ||\r\n              doPasswordsDiffer ||\r\n              !requirementsMet\r\n            }\r\n            type=\"submit\"\r\n          >\r\n            Save\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPasswordEditor.propTypes = {\r\n  flow: PropTypes.instanceOf(Flow).isRequired,\r\n  authActions: PropTypes.shape({\r\n    changeUserPassword: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n  feedbackMessage: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default PasswordEditor;\r\n","import _ from \"lodash\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Flow } from \"../sdk/index\";\r\nimport {\r\n  passwordRequirementsValidator,\r\n  getServerValidatedRequirementMessage,\r\n  generateRequirementsTooltip,\r\n} from \"../sdk/helpers\";\r\nimport { Redirect } from \"react-router\";\r\nimport { PATH } from \"./auth\";\r\n\r\nclass RecoveryCodeAndPasswordForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      recoveryCode: \"\",\r\n      newPassword: \"\",\r\n      newPasswordVerify: \"\",\r\n      feedbackMessage:\r\n        \"If you have an active account with a valid email address, you will receive \" +\r\n        \"an email with a recovery code which you may enter here, along with a new password. If you do \" +\r\n        \"not have an account or email, please contact your administrator to recover your password.\",\r\n      errorMessage: \"\",\r\n      isSubmitting: false,\r\n      isResending: false,\r\n      newPasswordFocused: false,\r\n      redirect: null,\r\n    };\r\n\r\n    this.handleRecoveryCodeUpdate = this.handleRecoveryCodeUpdate.bind(this);\r\n    this.handleNewPasswordUpdate = this.handleNewPasswordUpdate.bind(this);\r\n    this.handleNewPasswordVerifyUpdate = this.handleNewPasswordVerifyUpdate.bind(\r\n      this\r\n    );\r\n    this.handleResend = this.handleResend.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n    this.showTooltipReqs = this.showTooltipReqs.bind(this);\r\n    this.hideTooltipReqs = this.hideTooltipReqs.bind(this);\r\n  }\r\n\r\n  handleRecoveryCodeUpdate(event) {\r\n    this.setState({ recoveryCode: event.target.value });\r\n  }\r\n\r\n  handleNewPasswordUpdate(event) {\r\n    this.setState({\r\n      newPassword: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleNewPasswordVerifyUpdate(event) {\r\n    this.setState({ newPasswordVerify: event.target.value });\r\n  }\r\n\r\n  handleResend() {\r\n    const { flow, authActions } = this.props;\r\n\r\n    const sendRecoveryCodeUrl = _.get(\r\n      flow.getLinks(),\r\n      [\"password.sendRecoveryCode\", \"href\"],\r\n      null\r\n    );\r\n    if (!sendRecoveryCodeUrl) {\r\n      this.setState({\r\n        errorMessage:\r\n          \"An unexpected error has occurred. There is no send recovery code link in the flow.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.setState({ isResending: true });\r\n    return authActions\r\n      .sendRecoveryCode(sendRecoveryCodeUrl)\r\n      .then((newLoginFlow) => {\r\n        const updatedFlow = new Flow(newLoginFlow);\r\n        if (updatedFlow.isRecoveryCodeRequired()) {\r\n          this.setState({\r\n            feedbackMessage:\r\n              \"Recovery code resent. If an email address is associated with your account, \" +\r\n              \"you will receive an email with a recovery code which you may enter here, along with a new password. \" +\r\n              \"If you do not have an account or email, please contact your administrator to recover your password.\",\r\n            recoveryCode: \"\",\r\n            newPassword: \"\",\r\n            newPasswordVerify: \"\",\r\n            errorMessage: \"\",\r\n            isResending: false,\r\n          });\r\n          return Promise.resolve();\r\n        }\r\n        return Promise.reject(new Error(\"Could not understand flow\"));\r\n      })\r\n      .catch((err) => {\r\n        this.setState({\r\n          feedbackMessage:\r\n            \"Enter recovery code once received, along with a new password.\",\r\n          errorMessage: \"Unable to resend recovery code. Please try again.\",\r\n          isResending: false,\r\n        });\r\n      });\r\n  }\r\n\r\n  handleCancel(event) {\r\n    event.preventDefault();\r\n\r\n    const { authActions } = this.props;\r\n\r\n    this.setState({\r\n      redirect: (\r\n        <Redirect from={PATH.RECOVERY_CODE_AND_PASSWORD} to={PATH.SIGN_ON} />\r\n      ),\r\n      isSubmitting: false,\r\n      isResending: false,\r\n    });\r\n\r\n    // Reset flow to start the process again\r\n    authActions.updateFlow(null);\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const { recoveryCode, newPasswordVerify, newPassword } = this.state;\r\n    const { flow, authActions } = this.props;\r\n\r\n    const recoverPasswordUrl = _.get(\r\n      flow.getLinks(),\r\n      [\"password.recover\", \"href\"],\r\n      null\r\n    );\r\n    if (!recoverPasswordUrl) {\r\n      this.setState({\r\n        errorMessage:\r\n          \"An unexpected error has occurred. There is no password recovery link in the flow.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (newPasswordVerify !== newPassword) {\r\n      this.setState({\r\n        errorMessage: \"New passwords dont match. Please try again.\",\r\n      });\r\n      return Promise.reject();\r\n    }\r\n\r\n    if (recoverPasswordUrl === null) {\r\n      this.setState({\r\n        errorMessage:\r\n          \"An unexpected error has occurred. There is no password recovery link in the flow.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    return new Promise((resolved) =>\r\n      this.setState({ isSubmitting: true }, () => resolved())\r\n    )\r\n      .then(() =>\r\n        authActions.recoverUserPassword(\r\n          recoverPasswordUrl,\r\n          recoveryCode,\r\n          newPassword\r\n        )\r\n      )\r\n      .then((newFlow) => {\r\n        this.setState({\r\n          isSubmitting: false,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        const errorDetail = _.get(err, \"details[0].code\", null);\r\n\r\n        if (_.isEqual(errorDetail, \"INVALID_VALUE\")) {\r\n          const errorTarget = _.get(err, \"details[0].target\", null);\r\n\r\n          if (_.isEqual(errorTarget, \"recoveryCode\")) {\r\n            this.setState({\r\n              recoveryCode: \"\",\r\n              newPassword: \"\",\r\n              newPasswordVerify: \"\",\r\n              errorMessage: \"Incorrect recovery code. Please try again.\",\r\n              isSubmitting: false,\r\n            });\r\n          } else if (_.isEqual(errorTarget, \"newPassword\")) {\r\n            const unsatisfiedServerRequirements = _.get(\r\n              err,\r\n              \"details[0].innerError.unsatisfiedRequirements\",\r\n              []\r\n            );\r\n\r\n            // if there are multiple server validation fails, show just one\r\n            const failedReq = unsatisfiedServerRequirements[0];\r\n\r\n            this.setState({\r\n              newPassword: \"\",\r\n              newPasswordVerify: \"\",\r\n              errorMessage: getServerValidatedRequirementMessage(\r\n                failedReq,\r\n                flow.getPasswordPolicy()\r\n              ),\r\n              feedbackMessage:\r\n                \"Please try again to set a new password with existed recovery code\",\r\n              isSubmitting: false,\r\n            });\r\n          } else {\r\n            // Edge case where the error detail is INVALID_VALUE, but it's not a value we expect. Should never happen unless an API change happens without updating the UI.\r\n            this.setState({\r\n              errorMessage: \"An unexpected error has occurred.\",\r\n              isSubmitting: false,\r\n            });\r\n          }\r\n        } else {\r\n          // Edge case where the error detail not INVALID_VALUE. Should never happen unless an API change happens without updating the UI.\r\n          this.setState({\r\n            errorMessage: \"An unexpected error has occurred.\",\r\n            isSubmitting: false,\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  showTooltipReqs() {\r\n    this.setState({\r\n      newPasswordFocused: true,\r\n    });\r\n  }\r\n\r\n  hideTooltipReqs() {\r\n    this.setState({\r\n      newPasswordFocused: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      recoveryCode,\r\n      newPassword,\r\n      newPasswordVerify,\r\n      feedbackMessage,\r\n      errorMessage,\r\n      redirect,\r\n      newPasswordFocused,\r\n      isResending,\r\n      isSubmitting,\r\n    } = this.state;\r\n\r\n    const { flow, message } = this.props;\r\n\r\n    const clientValidatedRequirements = passwordRequirementsValidator(\r\n      flow.getPasswordPolicy(),\r\n      newPassword\r\n    );\r\n    const requirementsMet =\r\n      !!newPassword &&\r\n      _.reduce(\r\n        clientValidatedRequirements,\r\n        (result, req) => result && req.isValid,\r\n        true\r\n      );\r\n    const requirementsTooltip = generateRequirementsTooltip(\r\n      clientValidatedRequirements,\r\n      flow\r\n    );\r\n\r\n    const alert =\r\n      (errorMessage || message) &&\r\n      (errorMessage || (message && message.isError) ? (\r\n        <div className=\"alert alert-danger\">\r\n          {errorMessage ? errorMessage : message.content}\r\n        </div>\r\n      ) : (\r\n        <div className=\"alert alert-success\">{message.content}</div>\r\n      ));\r\n    const doPasswordsDiffer =\r\n      newPassword &&\r\n      newPasswordVerify &&\r\n      !_.isEqual(newPassword, newPasswordVerify);\r\n\r\n    const spinnerMessage = () => {\r\n      if (isSubmitting) {\r\n        return \"Processing recovery request...\";\r\n      } else if (isResending) {\r\n        return \"Processing resending recovery request...\";\r\n      }\r\n    };\r\n\r\n    return isSubmitting || isResending ? (\r\n      <div className=\"alert alert-info\">\r\n        {spinnerMessage}\r\n        <span className=\"loader\"></span>\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        {redirect}\r\n        <h1 className=\"heading\" data-id=\"recovery-heading\">\r\n          Enter New Password\r\n        </h1>\r\n        <div className=\"alert alert-info\">{feedbackMessage}</div>\r\n        {alert}\r\n        <form className=\"form\">\r\n          <div className=\"input-field\">\r\n            <label>Recovery Code</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"text-input\"\r\n              id=\"recovery-code\"\r\n              name=\"recovery-code\"\r\n              placeholder=\"Recovery Code\"\r\n              value={recoveryCode}\r\n              onChange={this.handleRecoveryCodeUpdate}\r\n            />\r\n          </div>\r\n          <div\r\n            className={\r\n              (!!newPassword && !requirementsMet && !newPasswordFocused\r\n                ? \"input-invalid\"\r\n                : \"input-valid\") + \" input-field\"\r\n            }\r\n          >\r\n            <label>New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"text-input\"\r\n              id=\"new\"\r\n              name=\"new\"\r\n              placeholder=\"New Password\"\r\n              value={newPassword}\r\n              onChange={this.handleNewPasswordUpdate}\r\n              onFocus={this.showTooltipReqs}\r\n              onBlur={this.hideTooltipReqs}\r\n            />\r\n            {clientValidatedRequirements.length > 0 &&\r\n              newPasswordFocused &&\r\n              !requirementsMet && (\r\n                <div className=\"tooltip show\">\r\n                  <h4 className=\"heading\">Minimum Password Requirements:</h4>\r\n                  <div className=\"requirements\">{requirementsTooltip}</div>\r\n                </div>\r\n              )}\r\n          </div>\r\n          <div\r\n            className={\r\n              (!!newPasswordVerify && !doPasswordsDiffer\r\n                ? \"input-valid\"\r\n                : \"input-invalid\") + \" input-field\"\r\n            }\r\n          >\r\n            <label>Verify New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"text-input\"\r\n              id=\"verify\"\r\n              name=\"verify\"\r\n              placeholder=\"Verify New Password\"\r\n              value={newPasswordVerify}\r\n              onChange={this.handleNewPasswordVerifyUpdate}\r\n            />\r\n            {doPasswordsDiffer && (\r\n              <div className=\"tooltip show\">\r\n                <i className=\"fa fa-warning\" style={{ color: \"red\" }}></i>\r\n                <span className=\"requirement__name\">\r\n                  Passwords dont match. Please try again.\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"input-field\">\r\n            {console.log(recoveryCode)}\r\n            {console.log(newPassword)}\r\n            {console.log(newPasswordVerify)}\r\n            {console.log(doPasswordsDiffer)}\r\n            {console.log(requirementsMet)}\r\n            <button\r\n              id=\"save\"\r\n              className=\"button\"\r\n              onClick={this.handleSubmit}\r\n              disabled={\r\n                !recoveryCode ||\r\n                !newPassword ||\r\n                !newPasswordVerify ||\r\n                doPasswordsDiffer ||\r\n                !requirementsMet\r\n              }\r\n              type=\"submit\"\r\n            >\r\n              Save\r\n            </button>\r\n          </div>\r\n          <div className=\"input-field\">\r\n            <button\r\n              className=\"button\"\r\n              data-id=\"cancel-btn\"\r\n              onClick={this.handleCancel}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div className=\"input-field\">\r\n          Didnt receive an email?{\" \"}\r\n          <a data-id=\"resend-email\" href=\"#\" onClick={this.handleResend}>\r\n            Resend\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nRecoveryCodeAndPasswordForm.propTypes = {\r\n  flow: PropTypes.instanceOf(Flow).isRequired,\r\n  authActions: PropTypes.shape({\r\n    sendRecoveryCode: PropTypes.func.isRequired,\r\n    recoverUserPassword: PropTypes.func.isRequired,\r\n    updateFlow: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default RecoveryCodeAndPasswordForm;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Redirect } from \"react-router\";\r\nimport { PATH } from \"./auth\";\r\nimport {\r\n  getServerValidatedRequirementMessage,\r\n  generateRequirementsTooltip,\r\n  passwordRequirementsValidator as validator,\r\n} from \"../sdk/helpers\";\r\nimport { Flow, STATUS } from \"../sdk\";\r\n\r\nclass RegistrationForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      passwordVerify: \"\",\r\n      redirect: null,\r\n      errorMessage: \"\",\r\n      isRegistering: false,\r\n      passwordFocused: false,\r\n    };\r\n\r\n    this.handleUsernameUpdate = this.handleUsernameUpdate.bind(this);\r\n    this.handleEmailUpdate = this.handleEmailUpdate.bind(this);\r\n    this.handlePasswordUpdate = this.handlePasswordUpdate.bind(this);\r\n    this.handlePasswordVerifyUpdate = this.handlePasswordVerifyUpdate.bind(\r\n      this\r\n    );\r\n    this.handleSignInClick = this.handleSignInClick.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showTooltipReqs = this.showTooltipReqs.bind(this);\r\n    this.hideTooltipReqs = this.hideTooltipReqs.bind(this);\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const { flow, authActions } = this.props;\r\n    const { username, email, password } = this.state;\r\n\r\n    const registrationLink = _.get(\r\n      flow.getLinks(),\r\n      [\"user.register\", \"href\"],\r\n      null\r\n    );\r\n    if (!registrationLink) {\r\n      this.setState({\r\n        errorMessage:\r\n          \"An unexpected error has occurred. There is no user registration link in the flow.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      isRegistering: true,\r\n    });\r\n\r\n    return authActions\r\n      .registerUser(registrationLink, username, email, password)\r\n      .then((newFlow) => {\r\n        this.setState({\r\n          isRegistering: false,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        this.setState({\r\n          isRegistering: false,\r\n        });\r\n        const errorDetail = _.get(err, \"details[0].code\", null);\r\n\r\n        if (_.isEqual(errorDetail, STATUS.INVALID_VALUE)) {\r\n          const errorTarget = _.get(err, \"details[0].target\", null);\r\n\r\n          if (_.isEqual(errorTarget, \"username\")) {\r\n            this.setState({\r\n              errorMessage: \"Invalid character in username.\",\r\n            });\r\n          } else if (_.isEqual(errorTarget, \"email\")) {\r\n            this.setState({\r\n              errorMessage: \"Invalid email address.\",\r\n            });\r\n          } else if (_.isEqual(errorTarget, \"password\")) {\r\n            const unsatisfiedServerRequirements = _.get(\r\n              err,\r\n              \"details[0].innerError.unsatisfiedRequirements\",\r\n              []\r\n            );\r\n\r\n            // if there are multiple server validation fails, show just one\r\n            const failedReq = unsatisfiedServerRequirements[0];\r\n\r\n            this.setState({\r\n              errorMessage: getServerValidatedRequirementMessage(\r\n                failedReq,\r\n                flow.getPasswordPolicy()\r\n              ),\r\n              password: \"\",\r\n              passwordVerify: \"\",\r\n            });\r\n          } else {\r\n            this.setState({\r\n              errorMessage: \"An unexpected error has occurred.\",\r\n            });\r\n          }\r\n        } else if (_.isEqual(errorDetail, STATUS.UNIQUENESS_VIOLATION)) {\r\n          this.setState({\r\n            errorMessage: \"Username already taken.\",\r\n          });\r\n        } else {\r\n          this.setState({\r\n            errorMessage: \"An unexpected error has occurred.\",\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  handleUsernameUpdate(event) {\r\n    this.setState({\r\n      username: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleEmailUpdate(event) {\r\n    this.setState({\r\n      email: event.target.value,\r\n    });\r\n  }\r\n\r\n  handlePasswordUpdate(event) {\r\n    this.setState({\r\n      password: event.target.value,\r\n    });\r\n  }\r\n\r\n  handlePasswordVerifyUpdate(event) {\r\n    this.setState({\r\n      passwordVerify: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleSignInClick() {\r\n    this.setState({\r\n      redirect: <Redirect from={PATH.REGISTER} to={PATH.SIGN_ON} />,\r\n    });\r\n  }\r\n\r\n  showTooltipReqs() {\r\n    this.setState({\r\n      passwordFocused: true,\r\n    });\r\n  }\r\n\r\n  hideTooltipReqs() {\r\n    this.setState({\r\n      passwordFocused: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      username,\r\n      email,\r\n      password,\r\n      passwordVerify,\r\n      redirect,\r\n      errorMessage,\r\n      isRegistering,\r\n      passwordFocused,\r\n    } = this.state;\r\n\r\n    const { flow, message } = this.props;\r\n\r\n    const clientValidatedRequirements = validator(\r\n      flow.getPasswordPolicy(),\r\n      password\r\n    );\r\n    const requirementsTooltip = generateRequirementsTooltip(\r\n      clientValidatedRequirements,\r\n      flow\r\n    );\r\n    const requirementsMet =\r\n      !!password &&\r\n      _.reduce(\r\n        clientValidatedRequirements,\r\n        (result, req) => result && req.isValid,\r\n        true\r\n      );\r\n\r\n    const doPasswordsDiffer = password !== passwordVerify;\r\n    const isReady = !!(\r\n      username &&\r\n      email &&\r\n      password &&\r\n      passwordVerify &&\r\n      !doPasswordsDiffer &&\r\n      requirementsMet\r\n    );\r\n\r\n    const alert =\r\n      (errorMessage || message) &&\r\n      (errorMessage || (message && message.isError) ? (\r\n        <div className=\"alert alert-danger\">\r\n          {errorMessage ? errorMessage : message.content}\r\n        </div>\r\n      ) : (\r\n        <div className=\"alert alert-info\">{message.content}</div>\r\n      ));\r\n\r\n    return isRegistering ? (\r\n      <div className=\"alert\"> Registering...</div>\r\n    ) : (\r\n      <div>\r\n        {redirect}\r\n        <h1 data-id=\"register-heading\" className=\"heading\">\r\n          Create Your Profile\r\n        </h1>\r\n        <div className=\"input-field\">Enter the required information below.</div>\r\n        {alert}\r\n        <div>\r\n          <form className=\"form\" onSubmit={this.onSubmit}>\r\n            <div className=\"input-field\">\r\n              <label>Username</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"text-input\"\r\n                id=\"username\"\r\n                name=\"username\"\r\n                placeholder=\"Username\"\r\n                value={username}\r\n                onChange={this.handleUsernameUpdate}\r\n                maxLength={128}\r\n                autoFocus\r\n              />\r\n            </div>\r\n            <div className=\"input-field\">\r\n              <label>Email Address</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"text-input\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                placeholder=\"Email Address\"\r\n                value={email}\r\n                onChange={this.handleEmailUpdate}\r\n              />\r\n            </div>\r\n            <div\r\n              className={\r\n                (password && requirementsMet && !passwordFocused\r\n                  ? \"input-valid\"\r\n                  : \"input-invalid\") + \" input-field\"\r\n              }\r\n            >\r\n              <label>Password</label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"text-input\"\r\n                id=\"password\"\r\n                name=\"password\"\r\n                placeholder=\"Password\"\r\n                value={password}\r\n                onChange={this.handlePasswordUpdate}\r\n                onFocus={this.showTooltipReqs}\r\n                onBlur={this.hideTooltipReqs}\r\n              />\r\n              {clientValidatedRequirements.length > 0 &&\r\n                passwordFocused &&\r\n                !requirementsMet && (\r\n                  <div className=\"tooltip show\">\r\n                    <h4 className=\"heading\">Minimum Password Requirements:</h4>\r\n                    <div className=\"requirements\">{requirementsTooltip}</div>\r\n                  </div>\r\n                )}\r\n            </div>\r\n            <div\r\n              className={\r\n                (passwordVerify && !doPasswordsDiffer\r\n                  ? \"input-valid\"\r\n                  : \"input-invalid\") + \" input-field\"\r\n              }\r\n            >\r\n              <label>Verify Password</label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"text-input\"\r\n                id=\"verify\"\r\n                name=\"verify\"\r\n                placeholder=\"Verify Password\"\r\n                value={passwordVerify}\r\n                onChange={this.handlePasswordVerifyUpdate}\r\n              />\r\n              {doPasswordsDiffer && (\r\n                <div className=\"tooltip show\">\r\n                  <i className=\"fa fa-warning\" style={{ color: \"red\" }}></i>\r\n                  <span className=\"requirement__name\">\r\n                    Passwords dont match. Please try again.\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <button\r\n              data-id=\"register-button\"\r\n              className=\"button\"\r\n              onClick={this.handleSubmit}\r\n              type=\"submit\"\r\n              disabled={!isReady}\r\n            >\r\n              Save\r\n            </button>\r\n          </form>\r\n        </div>\r\n        <div className=\"input-field\">\r\n          Already have an account?{\" \"}\r\n          <a data-id=\"signInBtn\" href=\"#\" onClick={this.handleSignInClick}>\r\n            Sign in\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nRegistrationForm.propTypes = {\r\n  flow: PropTypes.instanceOf(Flow).isRequired,\r\n  authActions: PropTypes.shape({\r\n    updateFlow: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default RegistrationForm;\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Flow, STATUS} from \"../sdk\";\r\n\r\nclass VerificationCode extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      verificationCode: '',\r\n      isVerifying: false,\r\n      errorMessage: '',\r\n      isResending: false\r\n    };\r\n\r\n    this.handleResendEmail = this.handleResendEmail.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleVerificationCodeUpdate = this.handleVerificationCodeUpdate.bind(this);\r\n  }\r\n\r\n  handleVerificationCodeUpdate(event) {\r\n    this.setState({\r\n      verificationCode: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const {\r\n      flow,\r\n      authActions,\r\n    } = this.props;\r\n    const { verificationCode } = this.state;\r\n    this.setState({\r\n      isVerifying: true,\r\n    });\r\n\r\n    const verifyLink = _.get(flow.getLinks()['user.verify'], 'href', null);\r\n    if (!verifyLink) {\r\n      this.setState({\r\n        errorMessage: 'An unexpected error has occurred. There is no user verification link in the flow.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    return authActions.verifyUser(verifyLink, verificationCode)\r\n      .then(newFlow => {\r\n        this.setState({\r\n          isVerifying: false,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ isVerifying: false });\r\n\r\n        const errorDetail = _.get(err, 'details[0].code', null);\r\n        if (_.isEqual(errorDetail, STATUS.INVALID_VALUE)) {\r\n          const errorTarget = _.get(err, 'details[0].target', null);\r\n          if (errorTarget === 'verificationCode') {\r\n            this.setState({\r\n              errorMessage: 'Incorrect verification code. Please try again.',\r\n              verificationCode: '',\r\n            });\r\n\r\n            return Promise.resolve(err);\r\n          }\r\n        }\r\n\r\n        this.setState({\r\n          errorMessage: 'An unexpected error occurred. Please try again.',\r\n          verificationCode: '',\r\n        });\r\n      });\r\n  }\r\n\r\n  handleResendEmail() {\r\n    const { flow, authActions } = this.props;\r\n\r\n    const sendVerificationCodeHref = _.get(flow.getLinks()['user.sendVerificationCode'], 'href', null);\r\n    if (!sendVerificationCodeHref) {\r\n      this.setState({\r\n        errorMessage: 'An unexpected error has occurred. There is no send verification code link in the flow.',\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.setState({ isResending: true });\r\n\r\n    return authActions.sendVerificationCode(sendVerificationCodeHref)\r\n      .then((newFlow) => {\r\n        this.setState({ errorMessage: '', isResending: false });\r\n        Promise.resolve(newFlow);\r\n      })\r\n      .catch((err) => {\r\n        this.setState({\r\n          errorMessage: 'Something went wrong when trying to resend a verification code.',\r\n          isResending: false,\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { verificationCode, isVerifying, errorMessage, isResending  } = this.state;\r\n    const { message } = this.props;\r\n\r\n    const isReady = !!verificationCode;\r\n\r\n    const alert = (errorMessage || message ) && (\r\n        (errorMessage || (message && message.isError)) ? (<div className=\"alert alert-danger\">{errorMessage ? errorMessage : message.content}</div>) :\r\n            <div className=\"alert alert-success\">{message.content}</div>\r\n    );\r\n\r\n    const spinnerMessage = isResending ? 'Resending verification code...' : 'Verifying...';\r\n\r\n    return isVerifying || isResending ?\r\n        <div className=\"alert alert-info\">\r\n          {spinnerMessage}\r\n          <span className=\"loader\"></span>\r\n        </div> :\r\n      (\r\n        <div>\r\n          <h1 className=\"heading\" data-id=\"verification-heading\">Thank You!</h1>\r\n          {alert}\r\n          <div className=\"input-field\">\r\n              <div className=\"alert alert-info\">\r\n              We&#39;ve sent a verification email to your email address.\r\n              Please verify your email to finish setting up your PingOne account.\r\n              </div>\r\n\r\n              <form className=\"form\" onSubmit={this.onSubmit}>\r\n                <div className=\"input-field\">\r\n                  <label>Verification Code</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    className=\"text-input\"\r\n                    id=\"verification-code\"\r\n                    name=\"verification-code\"\r\n                    placeholder=\"Verification Code\"\r\n                    value={verificationCode}\r\n                    onChange={this.handleVerificationCodeUpdate}\r\n                  />\r\n                </div>\r\n                <div className=\"input-field\">\r\n                  <button\r\n                      data-id=\"verify-button\"\r\n                      className=\"button\"\r\n                      onClick={this.handleSubmit}\r\n                      type=\"submit\"\r\n                      disabled={!isReady}>\r\n                    Verify\r\n                  </button>\r\n                </div>\r\n              </form>\r\n          </div>\r\n          <div className=\"input-field\">\r\n              Didnt receive an email? <a data-id=\"resend-email\" href=\"#\" onClick={this.handleResendEmail}>Resend</a>\r\n            </div>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nVerificationCode.propTypes = {\r\n  flow: PropTypes.instanceOf(Flow).isRequired,\r\n  authActions: PropTypes.shape({\r\n    updateFlow: PropTypes.func.isRequired,\r\n    sendVerificationCode: PropTypes.func.isRequired,\r\n    verifyUser: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default VerificationCode;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Redirect, Route } from \"react-router\";\r\nimport _ from \"lodash\";\r\nimport { getURLParameter } from \"../sdk/helpers\";\r\n\r\nimport UserLogin from \"./userLogin\";\r\nimport ForgotPassword from \"./forgotPassword\";\r\nimport MessageBlock from \"./message\";\r\nimport PasswordEditor from \"./updatePassword\";\r\nimport RecoveryCodeAndPasswordForm from \"./recoveryCodeAndPassword\";\r\nimport RegistrationForm from \"./registration\";\r\nimport VerificationCode from \"./verificationCode\";\r\n\r\nexport const PATH = {\r\n  SIGN_ON: \"/\",\r\n  EXPIRED: \"/expired\",\r\n  UNABLE_TO_SIGN_IN: \"/unableToSignIn\",\r\n  CHANGE_PASSWORD: \"/changePassword\",\r\n  REGISTER: \"/register\",\r\n  VERIFY: \"/verify\",\r\n  FORGOT_PASSWORD_USERNAME: \"/forgotPasswordUsername\",\r\n  RECOVERY_CODE_AND_PASSWORD: \"/recoveryCode\",\r\n};\r\n\r\n// Maps each initial status to list of compatible paths; 1st path in list is default\r\nexport const STATUS_TO_COMPATIBLE_PATHS = {\r\n  PASSWORD_EXPIRED: [PATH.EXPIRED],\r\n  MUST_CHANGE_PASSWORD: [PATH.CHANGE_PASSWORD],\r\n  USERNAME_PASSWORD_REQUIRED: [\r\n    PATH.SIGN_ON,\r\n    PATH.REGISTER,\r\n    PATH.VERIFY,\r\n    PATH.UNABLE_TO_SIGN_IN,\r\n    PATH.FORGOT_PASSWORD_USERNAME,\r\n  ],\r\n  PASSWORD_REQUIRED: [PATH.SIGN_ON],\r\n  RECOVERY_CODE_REQUIRED: [PATH.RECOVERY_CODE_AND_PASSWORD],\r\n  VERIFICATION_CODE_REQUIRED: [PATH.VERIFY],\r\n};\r\n\r\nclass Auth extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      errorMessage: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const environmentId = getURLParameter(\"environmentId\");\r\n    const flowId = getURLParameter(\"flowId\");\r\n    const error = getURLParameter(\"error\");\r\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n\r\n    if (error) {\r\n      this.setState({\r\n        errorMessage: JSON.parse(decodeURIComponent(error)),\r\n      });\r\n    } else if (!uuidRegex.test(environmentId)) {\r\n      this.setState({\r\n        errorMessage: `Invalid environmentId parameter: ${environmentId}. environmentId should be a valid UUID.`,\r\n      });\r\n    } else if (!error && !uuidRegex.test(flowId)) {\r\n      this.setState({\r\n        errorMessage: `Invalid flowId parameter: ${flowId}. flowId should be a valid UUID.`,\r\n      });\r\n    } else if (!this.props.authState.flow) {\r\n      this.props.authActions.getFlow(environmentId, flowId).catch((error) => {\r\n        if (_.isEqual(_.get(error, \"code\", null), \"NOT_FOUND\")) {\r\n          this.setState({\r\n            isSubmitting: false,\r\n            errorMessage: `There is no such flow resource with ${flowId} id.`,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            errorMessage:\r\n              \"An unexpected error has occurred while retrieving flow resource.\",\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { errorMessage } = this.state;\r\n    const { authState, location, branding } = this.props;\r\n\r\n    if (errorMessage) {\r\n      return <MessageBlock messageType={\"error\"} message={errorMessage} />;\r\n    }\r\n\r\n    const flow = _.get(authState, \"flow\", null);\r\n    const message = _.get(authState, \"message\", null);\r\n\r\n    if (flow && (flow.isCompleted() || flow.isFailed())) {\r\n      // Redirect to the resume endpoint\r\n      window.location.assign(flow.resumeUrl);\r\n      window.history.replaceState({}, \"\", \"#done\");\r\n\r\n      return <p>done</p>;\r\n    }\r\n\r\n    if (flow) {\r\n      const currentViewPath =\r\n        STATUS_TO_COMPATIBLE_PATHS[_.get(flow, \"status\", \"unknown\")];\r\n      if (!currentViewPath) {\r\n        console.log(\"flow completed or failed\");\r\n        return (\r\n          <div>\r\n            <Redirect to={PATH.SIGN_ON} />\r\n          </div>\r\n        );\r\n      }\r\n      // Redirect to an appropriate component if all next paths do not start with the current path\r\n      else if (\r\n        !_.some(currentViewPath, (path) =>\r\n          _.startsWith(location.pathname, path)\r\n        )\r\n      ) {\r\n        return (\r\n          <div>\r\n            <Redirect to={currentViewPath[0]} />\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      flow && (\r\n        <div className=\"container\">\r\n          <div className=\"row routes\">\r\n            <Route\r\n              path={PATH.SIGN_ON}\r\n              exact\r\n              render={(routeProps) => (\r\n                <UserLogin\r\n                  {...routeProps}\r\n                  {...this.props}\r\n                  flow={flow}\r\n                  message={message}\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path={PATH.CHANGE_PASSWORD}\r\n              exact\r\n              render={(routeProps) => (\r\n                <PasswordEditor\r\n                  {...routeProps}\r\n                  {...this.props}\r\n                  flow={flow}\r\n                  message={message}\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path={PATH.FORGOT_PASSWORD_USERNAME}\r\n              exact\r\n              render={(routeProps) => (\r\n                <ForgotPassword\r\n                  {...routeProps}\r\n                  {...this.props}\r\n                  flow={flow}\r\n                  message={message}\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path={PATH.EXPIRED}\r\n              exact\r\n              render={(routeProps) => (\r\n                <PasswordEditor\r\n                  {...routeProps}\r\n                  {...this.props}\r\n                  flow={flow}\r\n                  message={message}\r\n                  feedbackMessage=\"Your password has expired. Please create a new one.\"\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path={PATH.REGISTER}\r\n              exact\r\n              render={(routeProps) => (\r\n                <RegistrationForm\r\n                  {...routeProps}\r\n                  {...this.props}\r\n                  flow={flow}\r\n                  message={message}\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path={PATH.VERIFY}\r\n              exact\r\n              render={(routeProps) => (\r\n                <VerificationCode\r\n                  {...routeProps}\r\n                  {...this.props}\r\n                  flow={flow}\r\n                  message={message}\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path={PATH.RECOVERY_CODE_AND_PASSWORD}\r\n              exact\r\n              render={(routeProps) => (\r\n                <RecoveryCodeAndPasswordForm\r\n                  {...routeProps}\r\n                  {...this.props}\r\n                  flow={flow}\r\n                  message={message}\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path={PATH.UNABLE_TO_SIGN_IN}\r\n              exact\r\n              component={MessageBlock}\r\n            />\r\n          </div>\r\n        </div>\r\n      )\r\n    );\r\n  }\r\n}\r\n\r\nAuth.propTypes = {\r\n  location: PropTypes.shape({}).isRequired,\r\n\r\n  branding: PropTypes.shape({\r\n    logo: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n\r\n  authActions: PropTypes.shape({\r\n    getFlow: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n\r\n  authState: PropTypes.shape({\r\n    flow: PropTypes.shape({\r\n      status: PropTypes.string,\r\n    }),\r\n  }),\r\n};\r\n\r\nAuth.defaultProps = {\r\n  authState: null,\r\n};\r\n\r\nexport default Auth;\r\n","import _ from \"lodash\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport actions from \"../sdk/actions\";\r\nimport Auth from \"../components/auth\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  authState: _.get(state, \"auth\", null),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  authActions: actions.bind(dispatch),\r\n});\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Auth));\r\n","import authActions from '../sdk/actions';\r\n\r\nconst initialState = {\r\n  flow: null,\r\n  message: { isError: false, content: null },\r\n  isAuthenticated: false\r\n};\r\n\r\nconst reducer = (state = initialState, action = {}) => {\r\n  switch (action.type) {\r\n    case authActions.types.UPDATE_FLOW:\r\n      return {\r\n        ...state,\r\n        flow: action.payload.result,\r\n        isAuthenticated: action.payload.isAuthenticated,\r\n        message: { content : action.payload.message }\r\n      };\r\n\r\n    case authActions.types.UNRECOVERABLE_ERROR:\r\n      return {\r\n        ...state,\r\n        message: { isError: true, content : action.payload.error }\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default {\r\n  auth: reducer\r\n};\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport \"./index.css\";\r\nimport config from \"./config\";\r\nimport Container from \"./containers/container\";\r\nimport { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport freeze from \"redux-freeze\";\r\nimport reducer from \"./reducers/index\";\r\nimport { MemoryRouter } from \"react-router\";\r\n\r\nconst devToolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__\r\n  ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n  : (f) => f;\r\nconst composeStore = compose(\r\n  applyMiddleware(thunk, freeze),\r\n  devToolsExtension\r\n)(createStore);\r\nconst store = composeStore(combineReducers(reducer));\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <MemoryRouter>\r\n      <Container {...config} />\r\n    </MemoryRouter>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}